

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The pyAFQ Image API &#8212; AFQ 1.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'howto/usage/image';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to contribute to pyAFQ" href="../contributing.html" />
    <link rel="prev" title="The pyAFQ API methods" href="methods.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="AFQ 1.2 documentation - Home"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="AFQ 1.2 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorials/index.html">
                        Getting started with pyAFQ
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        How To
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../explanations/index.html">
                        Explanations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/index.html">
                        Reference Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/api/index.html">
                        API Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/yeatmanlab/pyAFQ" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorials/index.html">
                        Getting started with pyAFQ
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        How To
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../explanations/index.html">
                        Explanations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/index.html">
                        Reference Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/api/index.html">
                        API Reference
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/yeatmanlab/pyAFQ" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../installation_guide.html">How to install <code class="docutils literal notranslate"><span class="pre">pyAFQ</span></code></a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">How to use <cite>pyAFQ</cite></a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data.html">Organizing your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="kwargs.html">The pyAFQ API optional arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="scalars.html">How to add custom tissue properties from another pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="converter.html">Tractography from other pipelines</a></li>

<li class="toctree-l2"><a class="reference internal" href="docker.html">The pyAFQ docker image</a></li>
<li class="toctree-l2"><a class="reference internal" href="methods.html">The pyAFQ API methods</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">The pyAFQ Image API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">How to contribute to pyAFQ</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developing/index.html">How to develop <cite>pyAFQ</cite></a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing/tasks.html">Adding Tasks to the pyAFQ Workflow</a></li>


<li class="toctree-l2"><a class="reference internal" href="../developing/definitions.html">Adding Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/releasing.html">How to create a release</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help.html">How to get help using pyAFQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cite.html">How to cite our work</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../howto_examples/index.html">How to examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/add_custom_bundle.html">How to add new bundles into pyAFQ (SLF 1/2/3 Example)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/baby_afq.html">BabyAFQ : tractometry for infant dMRI data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/cerebellar_peduncles.html">Delineating cerebellar peduncles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/cloudknot_example.html">Using cloudknot to run pyAFQ on AWS batch:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/cloudknot_hcp_example.html">AFQ with HCP data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/plot_accoustic_radiations.html">How to add new bundles into pyAFQ(Accoustic Radiations Example)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/plot_afq_callosal.html">Callosal bundles using AFQ API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/plot_afq_fwdti.html">How to use Free water DTI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/plot_optic_radiations.html">How to add new bundles into pyAFQ(Optic Radiations Example)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/plot_recobundles.html">Using RecoBundles for bundle recognition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/use_subject_space_rois_from_freesurfer.html">Using Subject Space ROIs from Freesurfer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto_examples/vof_example.html">How to segment out only some bundles</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">How To</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">How to use <cite>pyAFQ</cite></a></li>
    
    <li class="breadcrumb-item active" aria-current="page">The pyAFQ Image API</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="section" id="the-pyafq-image-api">
<h1>The pyAFQ Image API<a class="headerlink" href="#the-pyafq-image-api" title="Permalink to this heading">#</a></h1>
<p>In the process of tractometry, it is sometimes necessary to apply images to
the data. By default, pyAFQ can automatically generate these images from the
DWI data. However, pyAFQ also has a system for users to specify which image to
use, called the Image API. Specifying an image, in general, is not as simple as
just providing a path to a file, because each subject and each session will
have a different image. That is why we developed pyAFQ’s Image API.</p>
<p>Currently, there are three different images that pyAFQ uses for tractometry:</p>
<ol class="arabic simple">
<li><p>The brain image. This is used to mask the dwi data and throw out any signal
that is outside of the brain. It is typically applied before fitting ODF
models. By default, it is calculated using <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.B0Image" title="AFQ.definitions.image.B0Image"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.B0Image</span></code></a>.</p></li>
<li><p>The tractography seed image. This image determines where tractography is
seeded. If it is floating point, the image is thresholded interally after
interpolation using the seed_threshold parameter. This is recommended.
However, the seed image can aslo be a binary image. By default, the
seed image is <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ScalarImage" title="AFQ.definitions.image.ScalarImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ScalarImage</span></code></a> (best_scalar) where best_scalar is chosen by the API
based on valid scalars (typically “dti_fa”).</p></li>
<li><p>The tractography stop image. This image determines where tractography stops.
If it is floating point, the image is thresholded interally after
interpolation using the stop_threshold parameter. This is recommended.
However, the stop image can aslo be a binary image. By default, the
stop image is <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ScalarImage" title="AFQ.definitions.image.ScalarImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ScalarImage</span></code></a> (best_scalar) where best_scalar is chosen by the API
based on valid scalars (typically “dti_fa”).</p></li>
</ol>
<p>In AFQ/definitions/image.py, there are several image classes one can use to specify images.
As a user, one should initialize image classes and pass them to the AFQ.api objects,
or write out the initialization as a string inside of one’s configuration file
for use with the CLI.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ImageFile" title="AFQ.definitions.image.ImageFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ImageFile</span></code></a>: The simplest image class is <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ImageFile" title="AFQ.definitions.image.ImageFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ImageFile</span></code></a>. If the image you want to use
is already generated, use this class. It is initialized using BIDS filters,
which pyAFQ will use to find images for each subject in each session.</p></li>
<li><p><a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.FullImage" title="AFQ.definitions.image.FullImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.FullImage</span></code></a>: The <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.FullImage" title="AFQ.definitions.image.FullImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.FullImage</span></code></a> class is used if one does not want to mask at all.
This image is True everywhere.</p></li>
<li><p><a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.RoiImage" title="AFQ.definitions.image.RoiImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.RoiImage</span></code></a>: All ROIs are “logically or’d” together in subject space to create
this image. This is useful to provide as the seed image. In segmentation,
pyAFQ retains only streamlines that pass through the ROIs. So, for
efficiency, one can choose to only seed in the ROIs in the first place.</p></li>
<li><p><a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.B0Image" title="AFQ.definitions.image.B0Image"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.B0Image</span></code></a>: This image uses dipy’s median_otsu on the subject’s b0 to generate
an image. This is the default brain image.</p></li>
<li><p><a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.LabelledImageFile" title="AFQ.definitions.image.LabelledImageFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.LabelledImageFile</span></code></a>: This image is similar to <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ImageFile" title="AFQ.definitions.image.ImageFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ImageFile</span></code></a>. It is also initialized
using BIDS filters but instead expects to find a labelled segmentation file.
In the initialization, the user also provides inclusive and exclusive
labels. These specify which labels to include and which labels to exclude
in the image. If both inclusive and exclusive labels are set, the combine
parameter is used to specify how to combine the images generated by the
inclusive and exclusive labels. A common use of this class would be to pass
BIDS filters to some segmentation file, and also set exclusive_labels = [0].
This will mark all labels that are not 0 as a part of the image, and can
be used as a brain image.</p></li>
<li><p><a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ThresholdedImageFile" title="AFQ.definitions.image.ThresholdedImageFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ThresholdedImageFile</span></code></a>: This image is similar to <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ImageFile" title="AFQ.definitions.image.ImageFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ImageFile</span></code></a>. It allows the user to
also provide a lower and upper bound. The bounds threshold the data from
the file. Note that for the tractography seed and stop images, thresholding
should typically be done using the seed_threshold and stop_threshold
parameters, not using an already thresholded image.</p></li>
<li><p><a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ScalarImage" title="AFQ.definitions.image.ScalarImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ScalarImage</span></code></a>: This image is initialized only by specifying a scalar. Use this
image if you want an image to be based on a scalar that pyAFQ already
calculates, like “dti_fa” or “dti_md”.</p></li>
<li><p><a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ThresholdedScalarImage" title="AFQ.definitions.image.ThresholdedScalarImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ThresholdedScalarImage</span></code></a>: This image is similar to <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.ScalarImage" title="AFQ.definitions.image.ScalarImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.ScalarImage</span></code></a>. It allows the user to
also provide a lower and upper bound. The bounds threshold the scalar data.
Note that for the tractography seed and stop images, thresholding
should typically be done using the seed_threshold and stop_threshold
parameters, not using an already thresholded image.</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.PFTImage</span></code>: A image for specifying the segmentations used in PFT. Should only
be used as a stop image. It’s three arguments are three other images, which
specify the three segmentations: white matter, gray matter, and
corticospinal fluid.</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.CombinedImage</span></code>: This class can be used to combine the other images. It takes
a list of images and allows the user to specify whether they should be
combined using a logical “and” or “or”.</p></li>
</ul>
<p>Here is an example of using the <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.RoiImage" title="AFQ.definitions.image.RoiImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.RoiImage</span></code></a> and <a class="reference internal" href="../../reference/api/AFQ/definitions/image/index.html#AFQ.definitions.image.LabelledImageFile" title="AFQ.definitions.image.LabelledImageFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.definitions.image.LabelledImageFile</span></code></a> on the HCP
data with the AFQ.api objects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">AFQ.data.fetch</span> <span class="kn">import</span> <span class="n">fetch_hcp</span>
<span class="kn">from</span> <span class="nn">AFQ.api.group</span> <span class="kn">import</span> <span class="n">GroupAFQ</span>
<span class="kn">import</span> <span class="nn">AFQ.definitions.image</span> <span class="k">as</span> <span class="nn">afm</span>

<span class="c1"># Download a subject to the AWS Batch machine from s3</span>
<span class="n">_</span><span class="p">,</span> <span class="n">hcp_bids</span> <span class="o">=</span> <span class="n">fetch_hcp</span><span class="p">(</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">profile_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">study</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;HCP_1200&quot;</span><span class="p">)</span>

<span class="c1"># make 500,000 seeds randomly distributed in the ROIs</span>
<span class="n">tracking_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;seed_image&quot;</span><span class="p">:</span> <span class="n">afm</span><span class="o">.</span><span class="n">RoiImage</span><span class="p">(),</span>
    <span class="s2">&quot;n_seeds&quot;</span><span class="p">:</span> <span class="mi">500000</span><span class="p">,</span>
    <span class="s2">&quot;random_seeds&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

<span class="c1"># use segmentation file from HCP to get a brain image,</span>
<span class="c1"># where everything not labelled 0 is considered a part of the brain</span>
<span class="n">brain_image_definition</span> <span class="o">=</span> <span class="n">afm</span><span class="o">.</span><span class="n">LabelledImageFile</span><span class="p">(</span>
    <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;seg&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;scope&#39;</span><span class="p">:</span> <span class="s1">&#39;dmriprep&#39;</span><span class="p">},</span> <span class="n">exclusive_labels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># define the api GroupAFQ object</span>
<span class="n">myafq</span> <span class="o">=</span> <span class="n">GroupAFQ</span><span class="p">(</span>
    <span class="n">hcp_bids</span><span class="p">,</span>
    <span class="n">brain_image_definition</span><span class="o">=</span><span class="n">brain_image_definition</span><span class="p">,</span>
    <span class="n">tracking_params</span><span class="o">=</span><span class="n">tracking_params</span><span class="p">)</span>

<span class="c1"># export_all runs the entire pipeline and creates many useful derivates</span>
<span class="n">myafq</span><span class="o">.</span><span class="n">export_all</span><span class="p">()</span>
</pre></div>
</div>
</div>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="methods.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">The pyAFQ API methods</p>
      </div>
    </a>
    <a class="right-next"
       href="../contributing.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">How to contribute to pyAFQ</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/yeatmanlab/pyAFQ/edit/master/docs/source/howto/usage/image.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/howto/usage/image.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>


  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2018--, The pyAFQ Contributors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4.
</p></div>
      
    </div>
  
</div>

  </footer>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-156363454-2");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>