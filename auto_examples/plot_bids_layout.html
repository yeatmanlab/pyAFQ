
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How pyAFQ uses BIDS &#8212; AFQ 1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'auto_examples/plot_bids_layout';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Plotting the Optic Radiations" href="plot_optic_radiations.html" />
    <link rel="prev" title="Callosal bundles using AFQ API" href="plot_afq_callosal.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../installation_guide.html">
                        Installing pyAFQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../usage/index.html">
                        Using pyAFQ
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_help.html">
                        Getting help using pyAFQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../contributing.html">
                        Contributing to pyAFQ
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../autoapi/index.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developing/index.html">
                        Developing pyAFQ
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/yeatmanlab/pyAFQ" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../installation_guide.html">
                        Installing pyAFQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../usage/index.html">
                        Using pyAFQ
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_help.html">
                        Getting help using pyAFQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../contributing.html">
                        Contributing to pyAFQ
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../autoapi/index.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developing/index.html">
                        Developing pyAFQ
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/yeatmanlab/pyAFQ" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="plot_afq_reco80.html">RecoBundles80 using AFQ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="vof_example.html">Finding only the ARC, pARC, VOF</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_afq_api.html">AFQ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_afq_callosal.html">Callosal bundles using AFQ API</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">How pyAFQ uses BIDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_optic_radiations.html">Plotting the Optic Radiations</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloudknot_example.html">Using cloudknot to run pyAFQ on AWS batch:</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_afq_fwdti.html">Free water DTI</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloudknot_hcp_example.html">AFQ with HCP data</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_tract_profile.html">Plotting tract profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_recobundles.html">Plotting tract profiles using RecoBundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_viz.html">Visualizing AFQ derivatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_callosal_tract_profile.html">Plotting Novel Tract Profiles:</a></li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-plot-bids-layout-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="how-pyafq-uses-bids">
<span id="sphx-glr-auto-examples-plot-bids-layout-py"></span><h1>How pyAFQ uses BIDS<a class="headerlink" href="#how-pyafq-uses-bids" title="Permalink to this heading">#</a></h1>
<p>The pyAFQ API relies heavily on the
<a class="reference external" href="https://bids-specification.readthedocs.io/en/stable/">Brain Imaging Data Standard (BIDS)</a>. This means that the software assumes that its inputs are organized
according to the BIDS spec and its outputs conform where possible with the
BIDS spec.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Derivatives of processing diffusion MRI are not currently fully
described in the existing BIDS specification, but describing these
is part of an ongoing effort. Wherever possible, we conform with
the draft implementation of the BIDS DWI derivatives available
<a class="reference external" href="https://bids-specification.readthedocs.io/en/wip-derivatives/05-derivatives/05-diffusion-derivatives.html">here</a></p>
</div>
<p>In this example, we will explore the use of BIDS in pyAFQ and see
how BIDS allows us to extend and provide flexibility to the users
of the software.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">op</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">nibabel</span> <span class="k">as</span> <span class="nn">nib</span>

<span class="kn">from</span> <span class="nn">AFQ.api.group</span> <span class="kn">import</span> <span class="n">GroupAFQ</span>
<span class="kn">import</span> <span class="nn">AFQ.data.fetch</span> <span class="k">as</span> <span class="nn">afd</span>
</pre></div>
</div>
<dl class="simple">
<dt>To interact with and query BIDS datasets, we use</dt><dd><p><a class="reference external" href="https://bids-standard.github.io/pybids/">pyBIDS</a>.</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bids</span>
</pre></div>
</div>
<p>We start with some example data. The data we will use here is
generated from the
<a class="reference external" href="https://purl.stanford.edu/ng782rw8378">Stanford HARDI dataset</a>.
The call below fetches
this dataset and organized it within the <cite>~/AFQ_data</cite> folder in the BIDS
format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">afd</span><span class="o">.</span><span class="n">organize_stanford_data</span><span class="p">(</span><span class="n">clear_previous_afq</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>After doing that, we should have a folder that looks like this:</p>
<div class="line-block">
<div class="line">stanford_hardi</div>
<div class="line">├── dataset_description.json</div>
<div class="line">└── derivatives</div>
<div class="line-block">
<div class="line">├── freesurfer</div>
<div class="line">│   ├── dataset_description.json</div>
<div class="line">│   └── sub-01</div>
<div class="line">│       └── ses-01</div>
<div class="line">│           └── anat</div>
<div class="line">│               ├── sub-01_ses-01_T1w.nii.gz</div>
<div class="line">│               └── sub-01_ses-01_seg.nii.gz</div>
<div class="line">└── vistasoft</div>
<div class="line-block">
<div class="line">├── dataset_description.json</div>
<div class="line">└── sub-01</div>
<div class="line-block">
<div class="line">└── ses-01</div>
<div class="line-block">
<div class="line">└── dwi</div>
<div class="line-block">
<div class="line">├── sub-01_ses-01_dwi.bvals</div>
<div class="line">├── sub-01_ses-01_dwi.bvecs</div>
<div class="line">└── sub-01_ses-01_dwi.nii.gz</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The top level directory is our overall bids dataset folder. In most
cases, this folder will include a <cite>raw</cite> folder that will contain the
raw data. In this case, we do not include the raw folder and only have
the pipelines that contains the outputs of preprocessing the data.
In general, only the preprocessed diffusion data is required.
See the “Organizing your data” section of “Using pyAFQ” for more details.
In this case, one folder containing Freesurfer derivatives and another
folder containing the DWI data that has been preprocessed with Vistasoft.
pyAFQ provides facilities to segment tractography results obtained
using other software. For example, we often use
<a class="reference external" href="https://qsiprep.readthedocs.io/en/latest/">qsiprep</a> to preprocess
our data and reconstruct tractographies with software such as
<a class="reference external" href="https://www.mrtrix.org/">MRTRIX</a>. Here, we will demonstrate how to use
these reconstructions in the pyAFQ segmentation and tractometry pipeline
We fetch this data and add it as a separate pipeline</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">afd</span><span class="o">.</span><span class="n">fetch_stanford_hardi_tractography</span><span class="p">()</span>

<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.path.html#os.path.expanduser" title="os.path.expanduser" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">expanduser</span></a><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">),</span> <span class="s1">&#39;AFQ_data&#39;</span><span class="p">,</span> <span class="s1">&#39;stanford_hardi&#39;</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_path</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">,</span> <span class="s1">&#39;derivatives&#39;</span><span class="p">,</span> <span class="s1">&#39;my_tractography&#39;</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sub_path</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_path</span></a><span class="p">,</span> <span class="s1">&#39;sub-01&#39;</span><span class="p">,</span> <span class="s1">&#39;ses-01&#39;</span><span class="p">,</span> <span class="s1">&#39;dwi&#39;</span><span class="p">)</span>

<a href="https://docs.python.org/3/library/os.html#os.makedirs" title="os.makedirs" class="sphx-glr-backref-module-os sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sub_path</span></a><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/os.html#os.rename" title="os.rename" class="sphx-glr-backref-module-os sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">rename</span></a><span class="p">(</span>
    <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span>
        <a href="https://docs.python.org/3/library/os.path.html#os.path.expanduser" title="os.path.expanduser" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">expanduser</span></a><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">),</span>
        <span class="s1">&#39;AFQ_data&#39;</span><span class="p">,</span>
        <span class="s1">&#39;stanford_hardi_tractography&#39;</span><span class="p">,</span>
        <span class="s1">&#39;full_segmented_cleaned_tractography.trk&#39;</span><span class="p">),</span>
    <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span>
        <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sub_path</span></a><span class="p">,</span>
        <span class="s1">&#39;sub-01_ses-01-dwi_tractography.trk&#39;</span><span class="p">))</span>

<span class="n">afd</span><span class="o">.</span><span class="n">to_bids_description</span><span class="p">(</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_path</span></a><span class="p">,</span>
    <span class="o">**</span><span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_tractography&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PipelineDescription&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_tractography&quot;</span><span class="p">}})</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>  0%|          | 0/11337 [00:00&lt;?, ? MB/s]
  0%|          | 4/11337 [00:00&lt;06:40, 28.29 MB/s]
  0%|          | 9/11337 [00:00&lt;05:51, 32.24 MB/s]
  0%|          | 35/11337 [00:00&lt;01:51, 100.92 MB/s]
  1%|1         | 135/11337 [00:00&lt;00:33, 337.20 MB/s]
  4%|4         | 454/11337 [00:00&lt;00:10, 1023.21 MB/s]
  7%|7         | 812/11337 [00:00&lt;00:06, 1532.16 MB/s]
 10%|#         | 1175/11337 [00:00&lt;00:05, 1945.08 MB/s]
 13%|#2        | 1427/11337 [00:01&lt;00:04, 2091.01 MB/s]
 15%|#5        | 1718/11337 [00:01&lt;00:04, 2224.35 MB/s]
 17%|#7        | 1983/11337 [00:01&lt;00:04, 2320.57 MB/s]
 20%|#9        | 2267/11337 [00:01&lt;00:03, 2393.58 MB/s]
 22%|##2       | 2541/11337 [00:01&lt;00:03, 2470.77 MB/s]
 25%|##4       | 2830/11337 [00:01&lt;00:03, 2517.25 MB/s]
 27%|##7       | 3103/11337 [00:01&lt;00:03, 2576.98 MB/s]
 30%|##9       | 3383/11337 [00:01&lt;00:03, 2542.88 MB/s]
 32%|###2      | 3639/11337 [00:01&lt;00:03, 2528.86 MB/s]
 35%|###4      | 3928/11337 [00:02&lt;00:02, 2536.97 MB/s]
 37%|###6      | 4183/11337 [00:02&lt;00:02, 2523.02 MB/s]
 39%|###9      | 4467/11337 [00:02&lt;00:02, 2536.49 MB/s]
 42%|####1     | 4744/11337 [00:02&lt;00:02, 2592.78 MB/s]
 44%|####4     | 5033/11337 [00:02&lt;00:02, 2576.63 MB/s]
 47%|####6     | 5313/11337 [00:02&lt;00:02, 2624.11 MB/s]
 49%|####9     | 5587/11337 [00:02&lt;00:02, 2577.75 MB/s]
 52%|#####1    | 5877/11337 [00:02&lt;00:02, 2650.40 MB/s]
 54%|#####4    | 6143/11337 [00:02&lt;00:01, 2648.55 MB/s]
 57%|#####6    | 6409/11337 [00:02&lt;00:01, 2612.81 MB/s]
 59%|#####8    | 6671/11337 [00:03&lt;00:01, 2553.10 MB/s]
 61%|######1   | 6951/11337 [00:03&lt;00:01, 2616.18 MB/s]
 64%|######3   | 7237/11337 [00:03&lt;00:01, 2596.83 MB/s]
 66%|######6   | 7510/11337 [00:03&lt;00:01, 2624.57 MB/s]
 69%|######8   | 7784/11337 [00:03&lt;00:01, 2657.67 MB/s]
 71%|#######1  | 8053/11337 [00:03&lt;00:01, 2571.59 MB/s]
 73%|#######3  | 8328/11337 [00:03&lt;00:01, 2594.59 MB/s]
 76%|#######5  | 8607/11337 [00:03&lt;00:01, 2548.03 MB/s]
 78%|#######8  | 8899/11337 [00:03&lt;00:00, 2653.49 MB/s]
 81%|########  | 9168/11337 [00:04&lt;00:00, 2570.25 MB/s]
 83%|########3 | 9437/11337 [00:04&lt;00:00, 2585.32 MB/s]
 86%|########5 | 9720/11337 [00:04&lt;00:00, 2581.08 MB/s]
 88%|########8 | 9979/11337 [00:04&lt;00:00, 2558.51 MB/s]
 91%|######### | 10274/11337 [00:04&lt;00:00, 2567.64 MB/s]
 93%|#########3| 10547/11337 [00:04&lt;00:00, 2612.06 MB/s]
 96%|#########5| 10831/11337 [00:04&lt;00:00, 2579.73 MB/s]
 98%|#########7| 11090/11337 [00:04&lt;00:00, 2575.35 MB/s]
100%|##########| 11337/11337 [00:04&lt;00:00, 2314.17 MB/s]

  0%|          | 0/14 [00:00&lt;?, ? MB/s]
 29%|##8       | 4/14 [00:00&lt;00:00, 28.19 MB/s]
100%|##########| 14/14 [00:00&lt;00:00, 65.28 MB/s]

  0%|          | 0/1037 [00:00&lt;?, ? MB/s]
  0%|          | 4/1037 [00:00&lt;00:36, 28.56 MB/s]
  2%|1         | 16/1037 [00:00&lt;00:16, 62.48 MB/s]
  7%|6         | 71/1037 [00:00&lt;00:04, 212.77 MB/s]
 28%|##7       | 289/1037 [00:00&lt;00:01, 739.17 MB/s]
 62%|######2   | 645/1037 [00:00&lt;00:00, 1381.66 MB/s]
 96%|#########5| 994/1037 [00:00&lt;00:00, 1743.88 MB/s]
100%|##########| 1037/1037 [00:00&lt;00:00, 1219.55 MB/s]
</pre></div>
</div>
<p>After we do that, our dataset folder should look like this:</p>
<div class="line-block">
<div class="line">stanford_hardi</div>
<div class="line">├── dataset_description.json</div>
<div class="line">└── derivatives</div>
<div class="line-block">
<div class="line">├── freesurfer</div>
<div class="line">│   ├── dataset_description.json</div>
<div class="line">│   └── sub-01</div>
<div class="line">│       └── ses-01</div>
<div class="line">│           └── anat</div>
<div class="line">│               ├── sub-01_ses-01_T1w.nii.gz</div>
<div class="line">│               └── sub-01_ses-01_seg.nii.gz</div>
<div class="line">├── my_tractography</div>
<div class="line">|   ├── dataset_description.json</div>
<div class="line">│   └── sub-01</div>
<div class="line">│       └── ses-01</div>
<div class="line">│           └── dwi</div>
<div class="line">│               └── sub-01_ses-01-dwi_tractography.trk</div>
<div class="line">└── vistasoft</div>
<div class="line-block">
<div class="line">├── dataset_description.json</div>
<div class="line">└── sub-01</div>
<div class="line-block">
<div class="line">└── ses-01</div>
<div class="line-block">
<div class="line">└── dwi</div>
<div class="line-block">
<div class="line">├── sub-01_ses-01_dwi.bvals</div>
<div class="line">├── sub-01_ses-01_dwi.bvecs</div>
<div class="line">└── sub-01_ses-01_dwi.nii.gz</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>To explore the layout of these derivatives, we will initialize a
<code class="xref py py-class docutils literal notranslate"><span class="pre">BIDSLayout</span></code> class instance to help us see what is in this dataset</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">layout</span> <span class="o">=</span> <span class="n">bids</span><span class="o">.</span><span class="n">BIDSLayout</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">,</span> <span class="n">derivatives</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/bids/layout/validation.py:156: UserWarning:

The PipelineDescription field was superseded by GeneratedBy in BIDS 1.4.0. You can use ``pybids upgrade`` to update your derivative dataset.
</pre></div>
</div>
<p>Because there is no raw data in this BIDS layout (only derivatives),
pybids will report that there are no subjects and sessions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>BIDS Layout: ...runner/AFQ_data/stanford_hardi | Subjects: 0 | Sessions: 0 | Runs: 0
</pre></div>
</div>
<p>But a query on the derivatives will reveal the different derivatives that
are stored here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">layout</span><span class="o">.</span><span class="n">derivatives</span></a><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;my_tractography&#39;: BIDS Layout: ...di/derivatives/my_tractography | Subjects: 1 | Sessions: 1 | Runs: 0, &#39;vistasoft&#39;: BIDS Layout: ...rd_hardi/derivatives/vistasoft | Subjects: 1 | Sessions: 1 | Runs: 0, &#39;freesurfer&#39;: BIDS Layout: ...d_hardi/derivatives/freesurfer | Subjects: 1 | Sessions: 1 | Runs: 0}
</pre></div>
</div>
<p>We can use a <code class="xref py py-class docutils literal notranslate"><span class="pre">bids.BIDSValidator</span></code> object to make sure that the
files within our data set are BIDS-compliant. For example, we can
extract the tractography derivatives part of our layout using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_tractography</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">layout</span><span class="o">.</span><span class="n">derivatives</span></a><span class="p">[</span><span class="s2">&quot;my_tractography&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>This variable is also a BIDS layout object. This object has a <code class="docutils literal notranslate"><span class="pre">get</span></code>
method, which allows us to query and find specific items within the
layout. For example, we can ask for files that have a suffix consistent
with tractography results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_files</span></a> <span class="o">=</span> <span class="n">my_tractography</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;tractography&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or ask for files that have a <code class="docutils literal notranslate"><span class="pre">.trk</span></code> extension:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_files</span></a> <span class="o">=</span> <span class="n">my_tractography</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">extension</span><span class="o">=</span><span class="s1">&#39;.trk&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, both of these would produce the same result.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tractography_file</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_files</span></a><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tractography_file</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;BIDSFile filename=&#39;/home/runner/AFQ_data/stanford_hardi/derivatives/my_tractography/sub-01/ses-01/dwi/sub-01_ses-01-dwi_tractography.trk&#39;&gt;
</pre></div>
</div>
<p>We can also get some more structured information about this file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tractography_file</span><span class="o">.</span><span class="n">get_entities</span><span class="p">())</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;datatype&#39;: &#39;dwi&#39;, &#39;extension&#39;: &#39;.trk&#39;, &#39;session&#39;: &#39;01&#39;, &#39;subject&#39;: &#39;01&#39;, &#39;suffix&#39;: &#39;tractography&#39;}
</pre></div>
</div>
<p>We can use a <code class="xref py py-class docutils literal notranslate"><span class="pre">bids.BIDSValidator</span></code> class instance to validate that
this file is compliant with the specification. Note that the validator
requires that the filename be provided relative to the root of the BIDS
dataset, so we have to split the string that contains the full path
of the tractography to extract only the part that is relative to the
root of the entire BIDS <code class="docutils literal notranslate"><span class="pre">layout</span></code> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_full_path</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_file</span><span class="o">.</span><span class="n">path</span></a>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_relative_path</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_full_path</span></a><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">layout</span><span class="o">.</span><span class="n">root</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">validator</span> <span class="o">=</span> <span class="n">bids</span><span class="o">.</span><span class="n">BIDSValidator</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">validator</span><span class="o">.</span><span class="n">is_bids</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">tractography_relative_path</span></a><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p>Next, we specify the information we need to define the bundles that we are
interested in segmenting. In this case, we are going to use a list of
bundle names for the bundle info. These names refer to bundles for
which we already have clear definitions of the information
needed to segment them (e.g., waypoint ROIs and probability maps).
For an example that includes custom definition of bundle info, see the
<a class="reference external" href="http://yeatmanlab.github.io/pyAFQ/auto_examples/plot_callosal_tract_profile.html">plot_callosal_tract_profile example</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bundle_info</span></a> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;SLF_L&quot;</span><span class="p">,</span> <span class="s2">&quot;SLF_R&quot;</span><span class="p">,</span> <span class="s2">&quot;ARC_L&quot;</span><span class="p">,</span> <span class="s2">&quot;ARC_R&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CST_L&quot;</span><span class="p">,</span> <span class="s2">&quot;CST_R&quot;</span><span class="p">,</span> <span class="s2">&quot;FP&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Now, we can define our GroupAFQ object, pointing to the derivatives of the
<cite>‘my_tractography’</cite> pipeline as inputs. This is done by setting the
<cite>import_tract</cite> key-word argument. We pass the
<cite>bundle_info</cite> defined above. We also point to the preprocessed
data that is in a <cite>‘dmriprep’</cite> pipeline. Note that the pipeline name
is not necessarily the name of the folder it is in; the pipeline name is
defined in each pipeline’s <cite>dataset_description.json</cite>. These data were
preprocessed with ‘vistasoft’, so this is the pipeline we’ll point to
If we were using <cite>‘qsiprep’</cite>, this is where we would pass that
string instead. If we did that, AFQ would look for a derivatives
folder called <cite>‘stanford_hardi/derivatives/qsiprep’</cite> and find the
preprocessed DWI data within it. Finally, to speed things up
a bit, we also sub-sample the provided tractography. This is
done by defining the segmentation_params dictionary input.
To sub-sample to 10,000 streamlines, we define
<cite>‘nb_streamlines’ = 10000</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_afq</span> <span class="o">=</span> <span class="n">GroupAFQ</span><span class="p">(</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">,</span>
    <span class="n">preproc_pipeline</span><span class="o">=</span><span class="s1">&#39;vistasoft&#39;</span><span class="p">,</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bundle_info</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bundle_info</span></a><span class="p">,</span>
    <span class="n">import_tract</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;suffix&quot;</span><span class="p">:</span> <span class="s2">&quot;tractography&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="s2">&quot;my_tractography&quot;</span>
    <span class="p">},</span>
    <span class="n">segmentation_params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;nb_streamlines&#39;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">})</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/bids/layout/validation.py:156: UserWarning:

The PipelineDescription field was superseded by GeneratedBy in BIDS 1.4.0. You can use ``pybids upgrade`` to update your derivative dataset.
</pre></div>
</div>
<p>Finally, to run the segmentation and extract tract profiles, we call
The <cite>export_all</cite> method. This creates all of the derivative outputs of
AFQ within the ‘stanford_hardi/derivatives/afq’ folder.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_afq</span><span class="o">.</span><span class="n">export_all</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>  0%|          | 0/145758.0 [00:00&lt;?, ?it/s]
  0%|          | 238/145758.0 [00:00&lt;01:01, 2373.38it/s]
  0%|          | 549/145758.0 [00:00&lt;00:51, 2803.20it/s]
  1%|          | 848/145758.0 [00:00&lt;00:50, 2886.08it/s]
  1%|          | 1172/145758.0 [00:00&lt;00:47, 3022.06it/s]
  1%|1         | 1475/145758.0 [00:00&lt;00:47, 3019.83it/s]
  1%|1         | 1791/145758.0 [00:00&lt;00:46, 3063.87it/s]
  1%|1         | 2123/145758.0 [00:00&lt;00:45, 3143.83it/s]
  2%|1         | 2438/145758.0 [00:00&lt;00:45, 3127.97it/s]
  2%|1         | 2763/145758.0 [00:00&lt;00:45, 3164.03it/s]
  2%|2         | 3095/145758.0 [00:01&lt;00:44, 3211.44it/s]
  2%|2         | 3417/145758.0 [00:01&lt;00:44, 3187.39it/s]
  3%|2         | 3743/145758.0 [00:01&lt;00:44, 3208.02it/s]
  3%|2         | 4073/145758.0 [00:01&lt;00:43, 3233.63it/s]
  3%|3         | 4412/145758.0 [00:01&lt;00:43, 3276.72it/s]
  3%|3         | 4740/145758.0 [00:01&lt;00:43, 3238.03it/s]
  3%|3         | 5084/145758.0 [00:01&lt;00:42, 3296.71it/s]
  4%|3         | 5422/145758.0 [00:01&lt;00:42, 3320.18it/s]
  4%|3         | 5762/145758.0 [00:01&lt;00:41, 3342.21it/s]
  4%|4         | 6097/145758.0 [00:01&lt;00:42, 3301.39it/s]
  4%|4         | 6438/145758.0 [00:02&lt;00:41, 3333.26it/s]
  5%|4         | 6778/145758.0 [00:02&lt;00:41, 3351.26it/s]
  5%|4         | 7116/145758.0 [00:02&lt;00:41, 3359.74it/s]
  5%|5         | 7462/145758.0 [00:02&lt;00:40, 3388.80it/s]
  5%|5         | 7801/145758.0 [00:02&lt;00:41, 3311.43it/s]
  6%|5         | 8141/145758.0 [00:02&lt;00:41, 3337.01it/s]
  6%|5         | 8485/145758.0 [00:02&lt;00:40, 3364.92it/s]
  6%|6         | 8836/145758.0 [00:02&lt;00:40, 3407.75it/s]
  6%|6         | 9190/145758.0 [00:02&lt;00:39, 3444.92it/s]
  7%|6         | 9535/145758.0 [00:02&lt;00:40, 3388.56it/s]
  7%|6         | 9878/145758.0 [00:03&lt;00:39, 3398.00it/s]
  7%|7         | 10237/145758.0 [00:03&lt;00:39, 3454.37it/s]
  7%|7         | 10602/145758.0 [00:03&lt;00:38, 3511.67it/s]
  8%|7         | 10976/145758.0 [00:03&lt;00:37, 3578.37it/s]
  8%|7         | 11335/145758.0 [00:03&lt;00:37, 3557.43it/s]
  8%|8         | 11691/145758.0 [00:03&lt;00:38, 3504.78it/s]
  8%|8         | 12065/145758.0 [00:03&lt;00:37, 3573.22it/s]
  9%|8         | 12424/145758.0 [00:03&lt;00:37, 3574.56it/s]
  9%|8         | 12790/145758.0 [00:03&lt;00:36, 3597.11it/s]
  9%|9         | 13156/145758.0 [00:03&lt;00:36, 3615.47it/s]
  9%|9         | 13518/145758.0 [00:04&lt;00:36, 3600.09it/s]
 10%|9         | 13879/145758.0 [00:04&lt;00:37, 3530.13it/s]
 10%|9         | 14250/145758.0 [00:04&lt;00:36, 3581.69it/s]
 10%|#         | 14617/145758.0 [00:04&lt;00:36, 3605.84it/s]
 10%|#         | 14995/145758.0 [00:04&lt;00:35, 3656.43it/s]
 11%|#         | 15367/145758.0 [00:04&lt;00:35, 3674.02it/s]
 11%|#         | 15735/145758.0 [00:04&lt;00:35, 3624.67it/s]
 11%|#1        | 16098/145758.0 [00:04&lt;00:36, 3577.23it/s]
 11%|#1        | 16468/145758.0 [00:04&lt;00:35, 3612.04it/s]
 12%|#1        | 16855/145758.0 [00:04&lt;00:34, 3685.36it/s]
 12%|#1        | 17225/145758.0 [00:05&lt;00:34, 3689.52it/s]
 12%|#2        | 17601/145758.0 [00:05&lt;00:34, 3710.24it/s]
 12%|#2        | 17973/145758.0 [00:05&lt;00:34, 3676.99it/s]
 13%|#2        | 18341/145758.0 [00:05&lt;00:35, 3624.40it/s]
 13%|#2        | 18720/145758.0 [00:05&lt;00:34, 3670.79it/s]
 13%|#3        | 19113/145758.0 [00:05&lt;00:33, 3746.08it/s]
 13%|#3        | 19503/145758.0 [00:05&lt;00:33, 3789.20it/s]
 14%|#3        | 19883/145758.0 [00:05&lt;00:33, 3734.73it/s]
 14%|#3        | 20269/145758.0 [00:05&lt;00:33, 3768.36it/s]
 14%|#4        | 20647/145758.0 [00:05&lt;00:33, 3727.22it/s]
 14%|#4        | 21020/145758.0 [00:06&lt;00:34, 3666.92it/s]
 15%|#4        | 21421/145758.0 [00:06&lt;00:33, 3766.18it/s]
 15%|#4        | 21807/145758.0 [00:06&lt;00:32, 3792.18it/s]
 15%|#5        | 22202/145758.0 [00:06&lt;00:32, 3836.84it/s]
 15%|#5        | 22589/145758.0 [00:06&lt;00:32, 3846.57it/s]
 16%|#5        | 22974/145758.0 [00:06&lt;00:32, 3783.57it/s]
 16%|#6        | 23353/145758.0 [00:06&lt;00:32, 3738.34it/s]
 16%|#6        | 23728/145758.0 [00:06&lt;00:33, 3692.49it/s]
 17%|#6        | 24115/145758.0 [00:06&lt;00:32, 3743.57it/s]
 17%|#6        | 24509/145758.0 [00:06&lt;00:31, 3798.92it/s]
 17%|#7        | 24899/145758.0 [00:07&lt;00:31, 3825.79it/s]
 17%|#7        | 25297/145758.0 [00:07&lt;00:31, 3870.32it/s]
 18%|#7        | 25685/145758.0 [00:07&lt;00:31, 3826.22it/s]
 18%|#7        | 26068/145758.0 [00:07&lt;00:31, 3795.68it/s]
 18%|#8        | 26448/145758.0 [00:07&lt;00:32, 3718.53it/s]
 18%|#8        | 26825/145758.0 [00:07&lt;00:31, 3730.44it/s]
 19%|#8        | 27217/145758.0 [00:07&lt;00:31, 3784.18it/s]
 19%|#8        | 27603/145758.0 [00:07&lt;00:31, 3804.57it/s]
 19%|#9        | 27998/145758.0 [00:07&lt;00:30, 3847.63it/s]
 19%|#9        | 28386/145758.0 [00:08&lt;00:30, 3857.26it/s]
 20%|#9        | 28772/145758.0 [00:08&lt;00:30, 3838.86it/s]
 20%|##        | 29157/145758.0 [00:08&lt;00:30, 3762.01it/s]
 20%|##        | 29534/145758.0 [00:08&lt;00:31, 3745.31it/s]
 21%|##        | 29928/145758.0 [00:08&lt;00:30, 3799.61it/s]
 21%|##        | 30322/145758.0 [00:08&lt;00:30, 3839.36it/s]
 21%|##1       | 30721/145758.0 [00:08&lt;00:29, 3881.37it/s]
 21%|##1       | 31113/145758.0 [00:08&lt;00:29, 3891.48it/s]
 22%|##1       | 31503/145758.0 [00:08&lt;00:29, 3874.87it/s]
 22%|##1       | 31891/145758.0 [00:08&lt;00:30, 3788.75it/s]
 22%|##2       | 32271/145758.0 [00:09&lt;00:30, 3754.80it/s]
 22%|##2       | 32652/145758.0 [00:09&lt;00:29, 3770.24it/s]
 23%|##2       | 33062/145758.0 [00:09&lt;00:29, 3865.94it/s]
 23%|##2       | 33463/145758.0 [00:09&lt;00:28, 3907.79it/s]
 23%|##3       | 33863/145758.0 [00:09&lt;00:28, 3933.92it/s]
 24%|##3       | 34257/145758.0 [00:09&lt;00:28, 3921.96it/s]
 24%|##3       | 34650/145758.0 [00:09&lt;00:29, 3821.60it/s]
 24%|##4       | 35038/145758.0 [00:09&lt;00:28, 3836.92it/s]
 24%|##4       | 35423/145758.0 [00:09&lt;00:28, 3825.75it/s]
 25%|##4       | 35825/145758.0 [00:09&lt;00:28, 3880.48it/s]
 25%|##4       | 36253/145758.0 [00:10&lt;00:27, 3998.97it/s]
 25%|##5       | 36654/145758.0 [00:10&lt;00:27, 3973.97it/s]
 25%|##5       | 37052/145758.0 [00:10&lt;00:27, 3934.57it/s]
 26%|##5       | 37446/145758.0 [00:10&lt;00:27, 3871.51it/s]
 26%|##5       | 37834/145758.0 [00:10&lt;00:28, 3818.41it/s]
 26%|##6       | 38217/145758.0 [00:10&lt;00:28, 3817.17it/s]
 27%|##6       | 38632/145758.0 [00:10&lt;00:27, 3914.64it/s]
 27%|##6       | 39045/145758.0 [00:10&lt;00:26, 3977.95it/s]
 27%|##7       | 39458/145758.0 [00:10&lt;00:26, 4022.66it/s]
 27%|##7       | 39861/145758.0 [00:10&lt;00:26, 3966.68it/s]
 28%|##7       | 40258/145758.0 [00:11&lt;00:26, 3962.25it/s]
 28%|##7       | 40655/145758.0 [00:11&lt;00:27, 3885.35it/s]
 28%|##8       | 41044/145758.0 [00:11&lt;00:27, 3839.81it/s]
 28%|##8       | 41448/145758.0 [00:11&lt;00:26, 3897.03it/s]
 29%|##8       | 41865/145758.0 [00:11&lt;00:26, 3975.28it/s]
 29%|##8       | 42263/145758.0 [00:11&lt;00:27, 3791.87it/s]
 29%|##9       | 42645/145758.0 [00:11&lt;00:31, 3310.12it/s]
 29%|##9       | 42988/145758.0 [00:11&lt;00:32, 3164.90it/s]
 30%|##9       | 43313/145758.0 [00:11&lt;00:33, 3070.90it/s]
 30%|##9       | 43686/145758.0 [00:12&lt;00:31, 3245.69it/s]
 30%|###       | 44044/145758.0 [00:12&lt;00:30, 3337.32it/s]
 30%|###       | 44439/145758.0 [00:12&lt;00:28, 3510.07it/s]
 31%|###       | 44848/145758.0 [00:12&lt;00:27, 3674.22it/s]
 31%|###1      | 45251/145758.0 [00:12&lt;00:27, 3712.14it/s]
 31%|###1      | 45625/145758.0 [00:12&lt;00:26, 3715.39it/s]
 32%|###1      | 46019/145758.0 [00:12&lt;00:26, 3779.82it/s]
 32%|###1      | 46399/145758.0 [00:12&lt;00:26, 3747.62it/s]
 32%|###2      | 46775/145758.0 [00:12&lt;00:29, 3348.59it/s]
 32%|###2      | 47143/145758.0 [00:13&lt;00:28, 3438.64it/s]
 33%|###2      | 47560/145758.0 [00:13&lt;00:26, 3642.95it/s]
 33%|###2      | 47977/145758.0 [00:13&lt;00:25, 3792.86it/s]
 33%|###3      | 48394/145758.0 [00:13&lt;00:24, 3900.61it/s]
 33%|###3      | 48804/145758.0 [00:13&lt;00:24, 3958.57it/s]
 34%|###3      | 49222/145758.0 [00:13&lt;00:23, 4022.51it/s]
 34%|###4      | 49627/145758.0 [00:13&lt;00:24, 3927.32it/s]
 34%|###4      | 50022/145758.0 [00:13&lt;00:24, 3872.46it/s]
 35%|###4      | 50426/145758.0 [00:13&lt;00:24, 3920.34it/s]
 35%|###4      | 50848/145758.0 [00:13&lt;00:23, 4007.83it/s]
 35%|###5      | 51274/145758.0 [00:14&lt;00:23, 4081.64it/s]
 35%|###5      | 51685/145758.0 [00:14&lt;00:23, 4089.45it/s]
 36%|###5      | 52095/145758.0 [00:14&lt;00:22, 4076.95it/s]
 36%|###6      | 52504/145758.0 [00:14&lt;00:23, 4037.68it/s]
 36%|###6      | 52909/145758.0 [00:14&lt;00:23, 3901.37it/s]
 37%|###6      | 53301/145758.0 [00:14&lt;00:23, 3867.49it/s]
 37%|###6      | 53708/145758.0 [00:14&lt;00:23, 3925.78it/s]
 37%|###7      | 54121/145758.0 [00:14&lt;00:23, 3983.29it/s]
 37%|###7      | 54539/145758.0 [00:14&lt;00:22, 4040.23it/s]
 38%|###7      | 54956/145758.0 [00:14&lt;00:22, 4077.44it/s]
 38%|###7      | 55365/145758.0 [00:15&lt;00:22, 4012.40it/s]
 38%|###8      | 55767/145758.0 [00:15&lt;00:23, 3891.56it/s]
 39%|###8      | 56158/145758.0 [00:15&lt;00:23, 3864.66it/s]
 39%|###8      | 56557/145758.0 [00:15&lt;00:22, 3899.93it/s]
 39%|###9      | 56962/145758.0 [00:15&lt;00:22, 3942.16it/s]
 39%|###9      | 57365/145758.0 [00:15&lt;00:22, 3964.45it/s]
 40%|###9      | 57780/145758.0 [00:15&lt;00:21, 4015.86it/s]
 40%|###9      | 58182/145758.0 [00:15&lt;00:22, 3953.95it/s]
 40%|####      | 58578/145758.0 [00:15&lt;00:22, 3867.14it/s]
 40%|####      | 58966/145758.0 [00:16&lt;00:22, 3870.74it/s]
 41%|####      | 59365/145758.0 [00:16&lt;00:22, 3903.92it/s]
 41%|####1     | 59764/145758.0 [00:16&lt;00:21, 3925.87it/s]
 41%|####1     | 60157/145758.0 [00:16&lt;00:21, 3920.77it/s]
 42%|####1     | 60551/145758.0 [00:16&lt;00:21, 3924.53it/s]
 42%|####1     | 60944/145758.0 [00:16&lt;00:22, 3844.54it/s]
 42%|####2     | 61329/145758.0 [00:16&lt;00:22, 3772.22it/s]
 42%|####2     | 61707/145758.0 [00:16&lt;00:22, 3712.10it/s]
 43%|####2     | 62079/145758.0 [00:17&lt;00:37, 2248.34it/s]
 43%|####2     | 62470/145758.0 [00:17&lt;00:32, 2582.04it/s]
 43%|####3     | 62864/145758.0 [00:17&lt;00:28, 2884.43it/s]
 43%|####3     | 63257/145758.0 [00:17&lt;00:26, 3135.79it/s]
 44%|####3     | 63644/145758.0 [00:17&lt;00:24, 3323.54it/s]
 44%|####3     | 64012/145758.0 [00:17&lt;00:24, 3332.99it/s]
 44%|####4     | 64370/145758.0 [00:17&lt;00:23, 3391.73it/s]
 44%|####4     | 64742/145758.0 [00:17&lt;00:23, 3481.59it/s]
 45%|####4     | 65150/145758.0 [00:17&lt;00:22, 3651.19it/s]
 45%|####4     | 65535/145758.0 [00:17&lt;00:21, 3707.56it/s]
 45%|####5     | 65915/145758.0 [00:18&lt;00:21, 3732.16it/s]
 45%|####5     | 66294/145758.0 [00:18&lt;00:21, 3732.95it/s]
 46%|####5     | 66671/145758.0 [00:18&lt;00:21, 3689.73it/s]
 46%|####5     | 67043/145758.0 [00:18&lt;00:21, 3640.23it/s]
 46%|####6     | 67409/145758.0 [00:18&lt;00:21, 3615.43it/s]
 47%|####6     | 67784/145758.0 [00:18&lt;00:21, 3654.50it/s]
 47%|####6     | 68168/145758.0 [00:18&lt;00:20, 3707.44it/s]
 47%|####7     | 68547/145758.0 [00:18&lt;00:20, 3731.52it/s]
 47%|####7     | 68921/145758.0 [00:18&lt;00:20, 3706.53it/s]
 48%|####7     | 69293/145758.0 [00:18&lt;00:21, 3605.50it/s]
 48%|####7     | 69674/145758.0 [00:19&lt;00:20, 3664.83it/s]
 48%|####8     | 70047/145758.0 [00:19&lt;00:20, 3683.92it/s]
 48%|####8     | 70420/145758.0 [00:19&lt;00:20, 3696.67it/s]
 49%|####8     | 70806/145758.0 [00:19&lt;00:20, 3744.88it/s]
 49%|####8     | 71190/145758.0 [00:19&lt;00:19, 3771.34it/s]
 49%|####9     | 71568/145758.0 [00:19&lt;00:19, 3738.57it/s]
 49%|####9     | 71943/145758.0 [00:19&lt;00:20, 3657.50it/s]
 50%|####9     | 72310/145758.0 [00:19&lt;00:20, 3600.01it/s]
 50%|####9     | 72671/145758.0 [00:19&lt;00:20, 3562.47it/s]
 50%|#####     | 73054/145758.0 [00:20&lt;00:19, 3638.87it/s]
 50%|#####     | 73449/145758.0 [00:20&lt;00:19, 3727.47it/s]
 51%|#####     | 73855/145758.0 [00:20&lt;00:18, 3823.81it/s]
 51%|#####     | 74256/145758.0 [00:20&lt;00:18, 3878.25it/s]
 51%|#####1    | 74645/145758.0 [00:20&lt;00:18, 3802.61it/s]
 51%|#####1    | 75026/145758.0 [00:20&lt;00:19, 3710.16it/s]
 52%|#####1    | 75398/145758.0 [00:20&lt;00:19, 3632.16it/s]
 52%|#####1    | 75762/145758.0 [00:20&lt;00:19, 3603.81it/s]
 52%|#####2    | 76156/145758.0 [00:20&lt;00:18, 3700.26it/s]
 53%|#####2    | 76552/145758.0 [00:20&lt;00:18, 3775.83it/s]
 53%|#####2    | 76938/145758.0 [00:21&lt;00:18, 3799.54it/s]
 53%|#####3    | 77327/145758.0 [00:21&lt;00:17, 3825.82it/s]
 53%|#####3    | 77710/145758.0 [00:21&lt;00:18, 3763.30it/s]
 54%|#####3    | 78087/145758.0 [00:21&lt;00:18, 3711.47it/s]
 54%|#####3    | 78459/145758.0 [00:21&lt;00:18, 3683.28it/s]
 54%|#####4    | 78839/145758.0 [00:21&lt;00:18, 3716.72it/s]
 54%|#####4    | 79226/145758.0 [00:21&lt;00:17, 3760.06it/s]
 55%|#####4    | 79603/145758.0 [00:21&lt;00:17, 3762.42it/s]
 55%|#####4    | 79980/145758.0 [00:21&lt;00:17, 3737.99it/s]
 55%|#####5    | 80354/145758.0 [00:21&lt;00:17, 3641.73it/s]
 55%|#####5    | 80719/145758.0 [00:22&lt;00:17, 3617.91it/s]
 56%|#####5    | 81082/145758.0 [00:22&lt;00:17, 3610.14it/s]
 56%|#####5    | 81454/145758.0 [00:22&lt;00:17, 3642.15it/s]
 56%|#####6    | 81848/145758.0 [00:22&lt;00:17, 3727.90it/s]
 56%|#####6    | 82235/145758.0 [00:22&lt;00:16, 3768.82it/s]
 57%|#####6    | 82613/145758.0 [00:22&lt;00:16, 3768.46it/s]
 57%|#####6    | 82990/145758.0 [00:22&lt;00:16, 3753.73it/s]
 57%|#####7    | 83366/145758.0 [00:22&lt;00:17, 3629.00it/s]
 57%|#####7    | 83744/145758.0 [00:22&lt;00:16, 3672.98it/s]
 58%|#####7    | 84115/145758.0 [00:22&lt;00:16, 3682.69it/s]
 58%|#####7    | 84508/145758.0 [00:23&lt;00:16, 3752.85it/s]
 58%|#####8    | 84911/145758.0 [00:23&lt;00:15, 3834.63it/s]
 59%|#####8    | 85298/145758.0 [00:23&lt;00:15, 3843.93it/s]
 59%|#####8    | 85691/145758.0 [00:23&lt;00:15, 3868.19it/s]
 59%|#####9    | 86079/145758.0 [00:23&lt;00:15, 3764.86it/s]
 59%|#####9    | 86457/145758.0 [00:23&lt;00:15, 3753.22it/s]
 60%|#####9    | 86833/145758.0 [00:23&lt;00:15, 3749.88it/s]
 60%|#####9    | 87222/145758.0 [00:23&lt;00:15, 3791.11it/s]
 60%|######    | 87618/145758.0 [00:23&lt;00:15, 3839.88it/s]
 60%|######    | 88015/145758.0 [00:23&lt;00:14, 3875.36it/s]
 61%|######    | 88403/145758.0 [00:24&lt;00:14, 3851.76it/s]
 61%|######    | 88801/145758.0 [00:24&lt;00:14, 3884.56it/s]
 61%|######1   | 89190/145758.0 [00:24&lt;00:14, 3842.92it/s]
 61%|######1   | 89575/145758.0 [00:24&lt;00:14, 3815.82it/s]
 62%|######1   | 89965/145758.0 [00:24&lt;00:14, 3840.57it/s]
 62%|######1   | 90367/145758.0 [00:24&lt;00:14, 3892.44it/s]
 62%|######2   | 90771/145758.0 [00:24&lt;00:13, 3934.69it/s]
 63%|######2   | 91177/145758.0 [00:24&lt;00:13, 3969.96it/s]
 63%|######2   | 91586/145758.0 [00:24&lt;00:13, 4004.88it/s]
 63%|######3   | 91987/145758.0 [00:25&lt;00:13, 3959.51it/s]
 63%|######3   | 92384/145758.0 [00:25&lt;00:13, 3879.98it/s]
 64%|######3   | 92774/145758.0 [00:25&lt;00:13, 3884.23it/s]
 64%|######3   | 93181/145758.0 [00:25&lt;00:13, 3938.35it/s]
 64%|######4   | 93586/145758.0 [00:25&lt;00:13, 3968.26it/s]
 64%|######4   | 94004/145758.0 [00:25&lt;00:12, 4030.99it/s]
 65%|######4   | 94408/145758.0 [00:25&lt;00:12, 4007.13it/s]
 65%|######5   | 94809/145758.0 [00:25&lt;00:12, 3998.85it/s]
 65%|######5   | 95210/145758.0 [00:25&lt;00:12, 3936.01it/s]
 66%|######5   | 95604/145758.0 [00:25&lt;00:12, 3922.13it/s]
 66%|######5   | 96016/145758.0 [00:26&lt;00:12, 3980.33it/s]
 66%|######6   | 96430/145758.0 [00:26&lt;00:12, 4026.19it/s]
 66%|######6   | 96833/145758.0 [00:26&lt;00:12, 4027.16it/s]
 67%|######6   | 97248/145758.0 [00:26&lt;00:11, 4061.79it/s]
 67%|######7   | 97671/145758.0 [00:26&lt;00:11, 4109.74it/s]
 67%|######7   | 98083/145758.0 [00:26&lt;00:11, 4010.93it/s]
 68%|######7   | 98485/145758.0 [00:26&lt;00:11, 3979.47it/s]
 68%|######7   | 98906/145758.0 [00:26&lt;00:11, 4045.93it/s]
 68%|######8   | 99326/145758.0 [00:26&lt;00:11, 4088.26it/s]
 68%|######8   | 99736/145758.0 [00:26&lt;00:11, 4070.86it/s]
 69%|######8   | 100144/145758.0 [00:27&lt;00:11, 4058.68it/s]
 69%|######9   | 100576/145758.0 [00:27&lt;00:10, 4134.68it/s]
 69%|######9   | 100990/145758.0 [00:27&lt;00:11, 4010.82it/s]
 70%|######9   | 101392/145758.0 [00:27&lt;00:11, 3983.53it/s]
 70%|######9   | 101808/145758.0 [00:27&lt;00:10, 4033.33it/s]
 70%|#######   | 102219/145758.0 [00:27&lt;00:10, 4052.69it/s]
 70%|#######   | 102625/145758.0 [00:27&lt;00:10, 4053.92it/s]
 71%|#######   | 103034/145758.0 [00:27&lt;00:10, 4063.15it/s]
 71%|#######   | 103448/145758.0 [00:27&lt;00:10, 4081.61it/s]
 71%|#######1  | 103857/145758.0 [00:27&lt;00:10, 3964.77it/s]
 72%|#######1  | 104255/145758.0 [00:28&lt;00:10, 3947.02it/s]
 72%|#######1  | 104666/145758.0 [00:28&lt;00:10, 3994.24it/s]
 72%|#######2  | 105081/145758.0 [00:28&lt;00:10, 4037.38it/s]
 72%|#######2  | 105493/145758.0 [00:28&lt;00:09, 4061.11it/s]
 73%|#######2  | 105900/145758.0 [00:28&lt;00:09, 4022.43it/s]
 73%|#######2  | 106303/145758.0 [00:28&lt;00:09, 3997.60it/s]
 73%|#######3  | 106703/145758.0 [00:28&lt;00:09, 3931.75it/s]
 73%|#######3  | 107097/145758.0 [00:28&lt;00:09, 3878.35it/s]
 74%|#######3  | 107500/145758.0 [00:28&lt;00:09, 3922.07it/s]
 74%|#######4  | 107898/145758.0 [00:28&lt;00:09, 3937.76it/s]
 74%|#######4  | 108309/145758.0 [00:29&lt;00:09, 3988.19it/s]
 75%|#######4  | 108710/145758.0 [00:29&lt;00:09, 3990.01it/s]
 75%|#######4  | 109110/145758.0 [00:29&lt;00:09, 3990.00it/s]
 75%|#######5  | 109510/145758.0 [00:29&lt;00:09, 3904.42it/s]
 75%|#######5  | 109901/145758.0 [00:29&lt;00:09, 3806.01it/s]
 76%|#######5  | 110283/145758.0 [00:29&lt;00:09, 3801.16it/s]
 76%|#######5  | 110680/145758.0 [00:29&lt;00:09, 3846.09it/s]
 76%|#######6  | 111074/145758.0 [00:29&lt;00:08, 3873.66it/s]
 76%|#######6  | 111462/145758.0 [00:29&lt;00:08, 3874.94it/s]
 77%|#######6  | 111855/145758.0 [00:30&lt;00:08, 3888.11it/s]
 77%|#######7  | 112248/145758.0 [00:30&lt;00:08, 3900.52it/s]
 77%|#######7  | 112639/145758.0 [00:30&lt;00:08, 3784.09it/s]
 78%|#######7  | 113019/145758.0 [00:30&lt;00:08, 3759.45it/s]
 78%|#######7  | 113412/145758.0 [00:30&lt;00:08, 3808.60it/s]
 78%|#######8  | 113818/145758.0 [00:30&lt;00:08, 3880.59it/s]
 78%|#######8  | 114207/145758.0 [00:30&lt;00:08, 3882.12it/s]
 79%|#######8  | 114603/145758.0 [00:30&lt;00:07, 3903.29it/s]
 79%|#######8  | 114994/145758.0 [00:30&lt;00:07, 3877.56it/s]
 79%|#######9  | 115382/145758.0 [00:30&lt;00:08, 3731.17it/s]
 79%|#######9  | 115757/145758.0 [00:31&lt;00:08, 3670.24it/s]
 80%|#######9  | 116153/145758.0 [00:31&lt;00:07, 3751.69it/s]
 80%|#######9  | 116551/145758.0 [00:31&lt;00:07, 3816.88it/s]
 80%|########  | 116953/145758.0 [00:31&lt;00:07, 3875.84it/s]
 81%|########  | 117352/145758.0 [00:31&lt;00:07, 3909.33it/s]
 81%|########  | 117744/145758.0 [00:31&lt;00:07, 3860.29it/s]
 81%|########1 | 118131/145758.0 [00:31&lt;00:07, 3761.81it/s]
 81%|########1 | 118510/145758.0 [00:31&lt;00:07, 3768.85it/s]
 82%|########1 | 118905/145758.0 [00:31&lt;00:07, 3820.85it/s]
 82%|########1 | 119296/145758.0 [00:31&lt;00:06, 3845.82it/s]
 82%|########2 | 119711/145758.0 [00:32&lt;00:06, 3934.90it/s]
 82%|########2 | 120114/145758.0 [00:32&lt;00:06, 3961.53it/s]
 83%|########2 | 120511/145758.0 [00:32&lt;00:06, 3917.86it/s]
 83%|########2 | 120904/145758.0 [00:32&lt;00:06, 3842.18it/s]
 83%|########3 | 121313/145758.0 [00:32&lt;00:06, 3913.47it/s]
 83%|########3 | 121706/145758.0 [00:32&lt;00:06, 3915.91it/s]
 84%|########3 | 122102/145758.0 [00:32&lt;00:06, 3928.44it/s]
 84%|########4 | 122518/145758.0 [00:32&lt;00:05, 3993.79it/s]
 84%|########4 | 122918/145758.0 [00:32&lt;00:05, 3926.93it/s]
 85%|########4 | 123312/145758.0 [00:32&lt;00:05, 3865.04it/s]
 85%|########4 | 123699/145758.0 [00:33&lt;00:05, 3864.29it/s]
 85%|########5 | 124104/145758.0 [00:33&lt;00:05, 3918.88it/s]
 85%|########5 | 124497/145758.0 [00:33&lt;00:05, 3914.80it/s]
 86%|########5 | 124898/145758.0 [00:33&lt;00:05, 3941.33it/s]
 86%|########5 | 125293/145758.0 [00:33&lt;00:05, 3918.76it/s]
 86%|########6 | 125686/145758.0 [00:33&lt;00:05, 3857.70it/s]
 86%|########6 | 126073/145758.0 [00:33&lt;00:05, 3800.00it/s]
 87%|########6 | 126463/145758.0 [00:33&lt;00:05, 3826.93it/s]
 87%|########7 | 126846/145758.0 [00:33&lt;00:04, 3813.07it/s]
 87%|########7 | 127233/145758.0 [00:33&lt;00:04, 3828.50it/s]
 88%|########7 | 127616/145758.0 [00:34&lt;00:04, 3813.03it/s]
 88%|########7 | 127998/145758.0 [00:34&lt;00:04, 3763.39it/s]
 88%|########8 | 128375/145758.0 [00:34&lt;00:04, 3709.34it/s]
 88%|########8 | 128747/145758.0 [00:34&lt;00:04, 3698.66it/s]
 89%|########8 | 129130/145758.0 [00:34&lt;00:04, 3736.31it/s]
 89%|########8 | 129512/145758.0 [00:34&lt;00:04, 3757.58it/s]
 89%|########9 | 129888/145758.0 [00:34&lt;00:04, 3736.16it/s]
 89%|########9 | 130262/145758.0 [00:34&lt;00:04, 3732.36it/s]
 90%|########9 | 130636/145758.0 [00:34&lt;00:04, 3699.21it/s]
 90%|########9 | 131007/145758.0 [00:35&lt;00:04, 3669.94it/s]
 90%|######### | 131391/145758.0 [00:35&lt;00:03, 3717.51it/s]
 90%|######### | 131789/145758.0 [00:35&lt;00:03, 3792.58it/s]
 91%|######### | 132176/145758.0 [00:35&lt;00:03, 3812.50it/s]
 91%|######### | 132558/145758.0 [00:35&lt;00:03, 3763.66it/s]
 91%|#########1| 132935/145758.0 [00:35&lt;00:03, 3659.42it/s]
 91%|#########1| 133302/145758.0 [00:35&lt;00:03, 3642.93it/s]
 92%|#########1| 133681/145758.0 [00:35&lt;00:03, 3685.44it/s]
 92%|#########1| 134067/145758.0 [00:35&lt;00:03, 3736.27it/s]
 92%|#########2| 134442/145758.0 [00:35&lt;00:03, 3727.45it/s]
 92%|#########2| 134816/145758.0 [00:36&lt;00:02, 3653.97it/s]
 93%|#########2| 135182/145758.0 [00:36&lt;00:02, 3613.81it/s]
 93%|#########2| 135552/145758.0 [00:36&lt;00:02, 3636.14it/s]
 93%|#########3| 135938/145758.0 [00:36&lt;00:02, 3699.26it/s]
 94%|#########3| 136314/145758.0 [00:36&lt;00:02, 3717.24it/s]
 94%|#########3| 136686/145758.0 [00:36&lt;00:02, 3673.57it/s]
 94%|#########4| 137054/145758.0 [00:36&lt;00:02, 3631.93it/s]
 94%|#########4| 137432/145758.0 [00:36&lt;00:02, 3673.70it/s]
 95%|#########4| 137804/145758.0 [00:36&lt;00:02, 3685.81it/s]
 95%|#########4| 138182/145758.0 [00:36&lt;00:02, 3710.77it/s]
 95%|#########5| 138554/145758.0 [00:37&lt;00:01, 3650.40it/s]
 95%|#########5| 138924/145758.0 [00:37&lt;00:01, 3664.33it/s]
 96%|#########5| 139304/145758.0 [00:37&lt;00:01, 3701.05it/s]
 96%|#########5| 139688/145758.0 [00:37&lt;00:01, 3740.06it/s]
 96%|#########6| 140063/145758.0 [00:37&lt;00:01, 3628.40it/s]
 96%|#########6| 140427/145758.0 [00:37&lt;00:01, 3613.32it/s]
 97%|#########6| 140798/145758.0 [00:37&lt;00:01, 3640.08it/s]
 97%|#########6| 141175/145758.0 [00:37&lt;00:01, 3677.82it/s]
 97%|#########7| 141544/145758.0 [00:37&lt;00:01, 3588.91it/s]
 97%|#########7| 141904/145758.0 [00:37&lt;00:01, 3573.25it/s]
 98%|#########7| 142271/145758.0 [00:38&lt;00:00, 3599.38it/s]
 98%|#########7| 142632/145758.0 [00:38&lt;00:00, 3562.59it/s]
 98%|#########8| 142989/145758.0 [00:38&lt;00:00, 3508.11it/s]
 98%|#########8| 143352/145758.0 [00:38&lt;00:00, 3542.36it/s]
 99%|#########8| 143707/145758.0 [00:38&lt;00:00, 3533.74it/s]
 99%|#########8| 144061/145758.0 [00:38&lt;00:00, 3478.94it/s]
 99%|#########9| 144416/145758.0 [00:38&lt;00:00, 3496.92it/s]
 99%|#########9| 144766/145758.0 [00:38&lt;00:00, 3476.51it/s]
100%|#########9| 145114/145758.0 [00:38&lt;00:00, 3467.20it/s]
100%|#########9| 145461/145758.0 [00:39&lt;00:00, 3407.78it/s]
100%|##########| 145758/145758.0 [00:39&lt;00:00, 3725.98it/s]
Optimizing level 2 [max iter: 10000]
Optimizing level 1 [max iter: 1000]
Optimizing level 0 [max iter: 100]
Optimizing level 2 [max iter: 10000]
Optimizing level 1 [max iter: 1000]
Optimizing level 0 [max iter: 100]
Optimizing level 2 [max iter: 10000]
Optimizing level 1 [max iter: 1000]
Optimizing level 0 [max iter: 100]

  0%|          | 0/1912 [00:00&lt;?, ?it/s]
  0%|          | 4/1912 [00:04&lt;32:41,  1.03s/it]
  1%|          | 18/1912 [00:04&lt;05:35,  5.64it/s]
 14%|#4        | 268/1912 [00:04&lt;00:13, 119.78it/s]
 41%|####      | 780/1912 [00:04&lt;00:02, 414.21it/s]
 54%|#####4    | 1036/1912 [00:04&lt;00:01, 568.66it/s]
 81%|########  | 1548/1912 [00:04&lt;00:00, 1001.51it/s]
100%|##########| 1912/1912 [00:04&lt;00:00, 406.07it/s]

  0%|          | 0/2840 [00:00&lt;?, ?it/s]
  4%|4         | 124/2840 [00:00&lt;00:02, 1221.84it/s]
 36%|###5      | 1020/2840 [00:00&lt;00:00, 4796.82it/s]
 72%|#######1  | 2044/2840 [00:00&lt;00:00, 4916.82it/s]
 90%|######### | 2556/2840 [00:00&lt;00:00, 3959.94it/s]
100%|##########| 2840/2840 [00:00&lt;00:00, 4517.12it/s]

  0%|          | 0/1845 [00:00&lt;?, ?it/s]
  5%|4         | 92/1845 [00:00&lt;00:01, 918.14it/s]
 41%|####1     | 764/1845 [00:00&lt;00:00, 4325.63it/s]
 83%|########3 | 1532/1845 [00:00&lt;00:00, 5786.37it/s]
100%|##########| 1845/1845 [00:00&lt;00:00, 6081.66it/s]

  0%|          | 0/2375 [00:00&lt;?, ?it/s]
  5%|5         | 124/2375 [00:00&lt;00:01, 1227.83it/s]
 43%|####2     | 1020/2375 [00:00&lt;00:00, 4621.12it/s]
 86%|########6 | 2044/2375 [00:00&lt;00:00, 5595.98it/s]
100%|##########| 2375/2375 [00:00&lt;00:00, 5930.21it/s]

  0%|          | 0/1054 [00:00&lt;?, ?it/s]
 24%|##3       | 252/1054 [00:00&lt;00:00, 2391.61it/s]
100%|##########| 1054/1054 [00:00&lt;00:00, 6505.28it/s]

  0%|          | 0/1432 [00:00&lt;?, ?it/s]
 18%|#7        | 252/1432 [00:00&lt;00:00, 2460.76it/s]
100%|##########| 1432/1432 [00:00&lt;00:00, 7937.68it/s]

  0%|          | 0/1137 [00:00&lt;?, ?it/s]
  8%|8         | 92/1137 [00:00&lt;00:01, 887.10it/s]
 67%|######7   | 764/1137 [00:00&lt;00:00, 3964.53it/s]
100%|##########| 1137/1137 [00:00&lt;00:00, 4074.55it/s]

  0%|          | 0/7 [00:00&lt;?, ?it/s]
 57%|#####7    | 4/7 [00:00&lt;00:00, 36.04it/s]
100%|##########| 7/7 [00:00&lt;00:00, 36.55it/s]

  0%|          | 0/7 [00:00&lt;?, ?it/s]
 57%|#####7    | 4/7 [00:00&lt;00:00, 36.14it/s]
100%|##########| 7/7 [00:00&lt;00:00, 36.58it/s]
</pre></div>
</div>
<p>A few common issues that can hinder BIDS from working properly are:</p>
<ol class="arabic simple">
<li><p>Faulty <cite>dataset_description.json</cite> file. You need to make sure that the
file contains the right names for the pipeline. See above for an example
of that.</p></li>
<li><p>File naming convention doesn’t uniquely identify file with bids filters.</p></li>
</ol>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 26 minutes  1.910 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-plot-bids-layout-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/9bdf3bad98b30ef023e365f728dd0600/plot_bids_layout.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_bids_layout.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/8c66bf5eff5959786100ed0e3b200d1e/plot_bids_layout.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_bids_layout.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="plot_afq_callosal.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Callosal bundles using AFQ API</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="plot_optic_radiations.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Plotting the Optic Radiations</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://github.com/yeatmanlab/pyAFQ/edit/master/docs/source/auto_examples/plot_bids_layout.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../_sources/auto_examples/plot_bids_layout.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>


  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2018--, The pyAFQ Contributors.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
</div>
  </footer>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-156363454-2");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>