
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AFQ.utils.volume &#8212; AFQ 0.1 documentation</title>
    
  <link href="../../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../../_static/css/index.f6b7ca918bee2f46fd9abac01cfb07d5.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../../../../_static/js/index.1e043a052b0af929e4d8.js">

    <script id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="AFQ.viz" href="../../viz/index.html" />
    <link rel="prev" title="AFQ.utils.streamlines" href="../streamlines/index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">


    
    <a class="navbar-brand" href="../../../../index.html">
      <p class="title">AFQ</p>
    </a>
    

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../installation_guide.html">
  Installing
  <code class="docutils literal notranslate">
   <span class="pre">
    pyAFQ
   </span>
  </code>
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../usage/index.html">
  Using pyAFQ
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../auto_examples/index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../getting_help.html">
  Getting help using pyAFQ
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../contributing.html">
  Contributing to pyAFQ
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../../index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../developing/index.html">
  Developing
  <cite>
   pyAFQ
  </cite>
 </a>
</li>

        
      </ul>

      <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l2 current active">
  <a class="reference internal" href="../../index.html">
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     AFQ
    </span>
   </code>
  </a>
  <ul class="current">
   <li class="toctree-l3">
    <a class="reference internal" href="../../definitions/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.definitions
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../../models/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.models
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l3 current active">
    <a class="reference internal" href="../index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.utils
      </span>
     </code>
    </a>
    <ul class="current">
     <li class="toctree-l4">
      <a class="reference internal" href="../bin/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         AFQ.utils.bin
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../models/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         AFQ.utils.models
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../parallel/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         AFQ.utils.parallel
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../stats/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         AFQ.utils.stats
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../streamlines/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         AFQ.utils.streamlines
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l4 current active">
      <a class="current reference internal" href="#">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         AFQ.utils.volume
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../../viz/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.viz
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../../api/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.api
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../../bundles/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.bundles
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../../data/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.data
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../../registration/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.registration
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../../segmentation/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.segmentation
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../../tractography/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       AFQ.tractography
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-contents">
   Module Contents
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#functions">
     Functions
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#AFQ.utils.volume.logger">
       logger
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#AFQ.utils.volume.transform_inverse_roi">
       transform_inverse_roi
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#AFQ.utils.volume.patch_up_roi">
       patch_up_roi
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#AFQ.utils.volume.density_map">
       density_map
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#AFQ.utils.volume.dice_coeff">
       dice_coeff
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

</nav>


              
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="module-AFQ.utils.volume">
<span id="afq-utils-volume"></span><h1><a class="reference internal" href="#module-AFQ.utils.volume" title="AFQ.utils.volume"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.utils.volume</span></code></a><a class="headerlink" href="#module-AFQ.utils.volume" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#AFQ.utils.volume.transform_inverse_roi" title="AFQ.utils.volume.transform_inverse_roi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_inverse_roi</span></code></a>(roi, mapping, bundle_name=’ROI’)</p></td>
<td><p>After being non-linearly transformed, ROIs tend to have holes in them.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#AFQ.utils.volume.patch_up_roi" title="AFQ.utils.volume.patch_up_roi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">patch_up_roi</span></code></a>(roi, bundle_name=’ROI’, make_convex=True)</p></td>
<td><p>After being non-linearly transformed, ROIs tend to have holes in them.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#AFQ.utils.volume.density_map" title="AFQ.utils.volume.density_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">density_map</span></code></a>(tractogram, n_sls=None, to_vox=False, normalize=False)</p></td>
<td><p>Create a streamline density map.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#AFQ.utils.volume.dice_coeff" title="AFQ.utils.volume.dice_coeff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dice_coeff</span></code></a>(arr1, arr2, weighted=True)</p></td>
<td><p>Compute Dice’s coefficient between two images.</p></td>
</tr>
</tbody>
</table>
<dl class="py data">
<dt id="AFQ.utils.volume.logger">
<code class="sig-prename descclassname"><span class="pre">AFQ.utils.volume.</span></code><code class="sig-name descname"><span class="pre">logger</span></code><a class="reference internal" href="../../../../_modules/AFQ/utils/volume.html#logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#AFQ.utils.volume.logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="AFQ.utils.volume.transform_inverse_roi">
<code class="sig-prename descclassname"><span class="pre">AFQ.utils.volume.</span></code><code class="sig-name descname"><span class="pre">transform_inverse_roi</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bundle_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ROI'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/AFQ/utils/volume.html#transform_inverse_roi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#AFQ.utils.volume.transform_inverse_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>After being non-linearly transformed, ROIs tend to have holes in them.
We perform a couple of computational geometry operations on the ROI to
fix that up.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>roi</strong><span class="classifier">Nifti1Image, str, ndarray</span></dt><dd><p>The ROI to transform. Can be a path or image, which will be
converted to an ndarray.</p>
</dd>
<dt><strong>mapping</strong><span class="classifier">DiffeomorphicMap object</span></dt><dd><p>A mapping between DWI space and a template.</p>
</dd>
<dt><strong>bundle_name</strong><span class="classifier">str, optional</span></dt><dd><p>Name of bundle, which may be useful for error messages.
Default: None</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>ROI after dilation and hole-filling</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="AFQ.utils.volume.patch_up_roi">
<code class="sig-prename descclassname"><span class="pre">AFQ.utils.volume.</span></code><code class="sig-name descname"><span class="pre">patch_up_roi</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bundle_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ROI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_convex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/AFQ/utils/volume.html#patch_up_roi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#AFQ.utils.volume.patch_up_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>After being non-linearly transformed, ROIs tend to have holes in them.
We perform a couple of computational geometry operations on the ROI to
fix that up.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>roi</strong><span class="classifier">3D binary array</span></dt><dd><p>The ROI after it has been transformed.</p>
</dd>
<dt><strong>sigma</strong><span class="classifier">float</span></dt><dd><p>The sigma for initial Gaussian smoothing.</p>
</dd>
<dt><strong>truncate</strong><span class="classifier">float</span></dt><dd><p>The truncation for the Gaussian</p>
</dd>
<dt><strong>bundle_name</strong><span class="classifier">str, optional</span></dt><dd><p>Name of bundle, which may be useful for error messages.
Default: None</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>ROI after dilation and hole-filling</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="AFQ.utils.volume.density_map">
<code class="sig-prename descclassname"><span class="pre">AFQ.utils.volume.</span></code><code class="sig-name descname"><span class="pre">density_map</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tractogram</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_sls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_vox</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/AFQ/utils/volume.html#density_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#AFQ.utils.volume.density_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a streamline density map.
based on:
<a class="reference external" href="https://dipy.org/documentation/1.1.1./examples_built/streamline_formats/">https://dipy.org/documentation/1.1.1./examples_built/streamline_formats/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tractogram</strong><span class="classifier">StatefulTractogram</span></dt><dd><p>Stateful tractogram whose streamlines are used to make
the density map.</p>
</dd>
<dt><strong>n_sls</strong><span class="classifier">int or None, optional</span></dt><dd><p>n_sls to randomly select to make the density map.
If None, all streamlines are used.
Default: None</p>
</dd>
<dt><strong>to_vox</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to put the stateful tractogram in VOX space before making
the density map.
Default: False</p>
</dd>
<dt><strong>normalize</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to normalize maximum values to 1.
Default: False</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>Nifti1Image containing the density map.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="AFQ.utils.volume.dice_coeff">
<code class="sig-prename descclassname"><span class="pre">AFQ.utils.volume.</span></code><code class="sig-name descname"><span class="pre">dice_coeff</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arr2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weighted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/AFQ/utils/volume.html#dice_coeff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#AFQ.utils.volume.dice_coeff" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute Dice’s coefficient between two images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>arr1</strong><span class="classifier">Nifti1Image, str, ndarray</span></dt><dd><p>One ndarray to compare. Can be a path or image, which will be
converted to an ndarray.</p>
</dd>
<dt><strong>arr2</strong><span class="classifier">Nifti1Image, str, ndarray</span></dt><dd><p>The other ndarray to compare. Can be a path or image, which will be
converted to an ndarray.</p>
</dd>
<dt><strong>weighted</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether or not to weight the DICE coefficient as in <span id="id1">[Cousineau2017]</span>.
The weighted Dice coefficient is calculated by adding the sum of all
values in arr1 where arr2 is nonzero to the sum of all values in arr2
where arr1 is nonzero, then dividing that by the sum of all values in
arr1 and arr2.
Default: True</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>The dice similarity between the images.</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<dl class="citation">
<dt class="label" id="r525e1fe6798e-1"><span class="brackets">1</span></dt>
<dd><p>Cousineau M, Jodoin PM, Morency FC, et al. A test-retest study on
Parkinson’s PPMI dataset yields statistically significant white
matter fascicles. Neuroimage Clin. 2017;16:222-233. Published 2017
Jul 25. doi:10.1016/j.nicl.2017.07.020</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="../streamlines/index.html" title="previous page"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.utils.streamlines</span></code></a>
    <a class='right-next' id="next-link" href="../../viz/index.html" title="next page"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.viz</span></code></a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../../../_static/js/index.1e043a052b0af929e4d8.js"></script>


    
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2018, Ariel Rokem.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.3.<br/>
    </p>
  </div>
</footer>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-156363454-2");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>