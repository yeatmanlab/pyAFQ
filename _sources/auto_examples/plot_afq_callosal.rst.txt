
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/plot_afq_callosal.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_plot_afq_callosal.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_plot_afq_callosal.py:


==========================
Callosal bundles using AFQ API
==========================
An example using the AFQ API to find callosal bundles using the templates from:
http://hdl.handle.net/1773/34926

.. GENERATED FROM PYTHON SOURCE LINES 8-17

.. code-block:: default

    import os.path as op

    import plotly

    from AFQ.api.group import GroupAFQ
    import AFQ.api.bundle_dict as abd
    from AFQ.definitions.mask import RoiMask
    import AFQ.data as afd








.. GENERATED FROM PYTHON SOURCE LINES 18-23

Get some example data
---------------------

Retrieves `Stanford HARDI dataset <https://purl.stanford.edu/ng782rw8378>`_.


.. GENERATED FROM PYTHON SOURCE LINES 23-26

.. code-block:: default


    afd.organize_stanford_data(clear_previous_afq=True)








.. GENERATED FROM PYTHON SOURCE LINES 27-34

Set tractography parameters (optional)
---------------------
We make this tracking_params which we will pass to the AFQ object
which specifies that we want 100,000 seeds randomly distributed
in the ROIs of every bundle.

We only do this to make this example faster and consume less space.

.. GENERATED FROM PYTHON SOURCE LINES 34-40

.. code-block:: default


    tracking_params = dict(seed_mask=RoiMask(),
                           n_seeds=10000,
                           random_seeds=True,
                           rng_seed=42)








.. GENERATED FROM PYTHON SOURCE LINES 41-49

Initialize an AFQ object:
-------------------------

We specify bundle_info as the callosal bundles only
(`abd.CALLOSUM_BUNDLES`). If we want to segment both the callosum
and the other bundles, we would pass `abd.CALLOSUM_BUNDLES + abd.BUNDLES`
instead. This would tell the AFQ object to use bundles from both
the standard and callosal templates.

.. GENERATED FROM PYTHON SOURCE LINES 49-62

.. code-block:: default


    myafq = GroupAFQ(
        bids_path=op.join(afd.afq_home, 'stanford_hardi'),
        preproc_pipeline='vistasoft',
        bundle_info=abd.CALLOSUM_BUNDLES,
        tracking_params=tracking_params,
        viz_backend_spec='plotly_no_gif')

    # Calling export all produces all of the outputs of processing, including
    # tractography, scalar maps, tract profiles and visualizations:
    myafq.export_all()






.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
      0%|          | 0/4966 [00:00<?, ?it/s]      0%|          | 2/4966 [00:00<09:38,  8.58it/s]      0%|          | 4/4966 [00:04<1:38:22,  1.19s/it]      5%|5         | 270/4966 [00:04<00:51, 91.27it/s]     21%|##        | 1038/4966 [00:04<00:08, 437.98it/s]     42%|####1     | 2062/4966 [00:04<00:02, 1009.81it/s]     83%|########2 | 4110/4966 [00:04<00:00, 2272.08it/s]    100%|##########| 4966/4966 [00:04<00:00, 1046.15it/s]
      0%|          | 0/4966 [00:00<?, ?it/s]      4%|3         | 188/4966 [00:00<00:02, 1847.39it/s]     61%|######1   | 3043/4966 [00:00<00:00, 17441.18it/s]    100%|##########| 4966/4966 [00:00<00:00, 16745.64it/s]
      0%|          | 0/4966 [00:00<?, ?it/s]     15%|#5        | 764/4966 [00:00<00:00, 6502.08it/s]     41%|####1     | 2044/4966 [00:00<00:00, 5985.90it/s]     82%|########2 | 4092/4966 [00:00<00:00, 7379.52it/s]    100%|##########| 4966/4966 [00:00<00:00, 8614.06it/s]
      0%|          | 0/4966 [00:00<?, ?it/s]      4%|3         | 188/4966 [00:00<00:02, 1819.10it/s]     41%|####1     | 2044/4966 [00:00<00:00, 10045.67it/s]     82%|########2 | 4092/4966 [00:00<00:00, 12150.95it/s]    100%|##########| 4966/4966 [00:00<00:00, 13282.22it/s]
      0%|          | 0/4966 [00:00<?, ?it/s]     15%|#5        | 764/4966 [00:00<00:00, 7361.83it/s]     31%|###       | 1532/4966 [00:00<00:00, 5592.96it/s]     62%|######1   | 3068/4966 [00:00<00:00, 8159.78it/s]     82%|########2 | 4092/4966 [00:00<00:00, 8035.21it/s]    100%|##########| 4966/4966 [00:00<00:00, 9331.08it/s]
      0%|          | 0/4966 [00:00<?, ?it/s]      1%|1         | 60/4966 [00:00<00:08, 598.11it/s]     10%|#         | 508/4966 [00:00<00:01, 2733.27it/s]     21%|##        | 1020/4966 [00:00<00:01, 3637.24it/s]     41%|####1     | 2044/4966 [00:00<00:00, 4355.63it/s]     51%|#####1    | 2556/4966 [00:00<00:00, 4089.15it/s]     62%|######1   | 3068/4966 [00:00<00:00, 3919.32it/s]     72%|#######2  | 3580/4966 [00:00<00:00, 3899.13it/s]     82%|########2 | 4092/4966 [00:01<00:00, 3685.80it/s]     93%|#########2| 4604/4966 [00:01<00:00, 3298.16it/s]    100%|##########| 4966/4966 [00:01<00:00, 3836.12it/s]
      0%|          | 0/4966 [00:00<?, ?it/s]      8%|7         | 380/4966 [00:00<00:01, 3427.04it/s]     31%|###       | 1532/4966 [00:00<00:00, 7619.36it/s]     46%|####6     | 2298/4966 [00:00<00:00, 6852.06it/s]     62%|######1   | 3068/4966 [00:00<00:00, 6986.18it/s]     82%|########2 | 4092/4966 [00:00<00:00, 7391.32it/s]    100%|##########| 4966/4966 [00:00<00:00, 8552.20it/s]
      0%|          | 0/4966 [00:00<?, ?it/s]      2%|2         | 124/4966 [00:00<00:03, 1227.08it/s]     31%|###       | 1532/4966 [00:00<00:00, 7599.54it/s]     62%|######1   | 3068/4966 [00:00<00:00, 9776.64it/s]     82%|########2 | 4092/4966 [00:00<00:00, 9077.80it/s]    100%|##########| 4966/4966 [00:00<00:00, 10325.78it/s]
      0%|          | 0/8 [00:00<?, ?it/s]     12%|#2        | 1/8 [00:00<00:03,  2.17it/s]     25%|##5       | 2/8 [00:00<00:01,  3.09it/s]     38%|###7      | 3/8 [00:00<00:01,  3.69it/s]     50%|#####     | 4/8 [00:01<00:01,  3.99it/s]     62%|######2   | 5/8 [00:01<00:00,  4.19it/s]     75%|#######5  | 6/8 [00:01<00:00,  4.28it/s]     88%|########7 | 7/8 [00:01<00:00,  4.40it/s]    100%|##########| 8/8 [00:01<00:00,  4.41it/s]    100%|##########| 8/8 [00:01<00:00,  4.01it/s]
      0%|          | 0/8 [00:00<?, ?it/s]     12%|#2        | 1/8 [00:00<00:01,  4.86it/s]     25%|##5       | 2/8 [00:00<00:01,  4.90it/s]     38%|###7      | 3/8 [00:00<00:00,  5.12it/s]     50%|#####     | 4/8 [00:00<00:00,  4.98it/s]     62%|######2   | 5/8 [00:01<00:00,  5.00it/s]     75%|#######5  | 6/8 [00:01<00:00,  5.06it/s]     88%|########7 | 7/8 [00:01<00:00,  5.21it/s]    100%|##########| 8/8 [00:01<00:00,  5.34it/s]    100%|##########| 8/8 [00:01<00:00,  5.15it/s]




.. GENERATED FROM PYTHON SOURCE LINES 63-68

Visualizing bundles and tract profiles:
---------------------------------------
This would run the script and visualize the bundles using the plotly
interactive visualization, which should automatically open in a
new browser window.

.. GENERATED FROM PYTHON SOURCE LINES 68-70

.. code-block:: default

    bundle_html = myafq.all_bundles_figure
    plotly.io.show(bundle_html["01"])



.. raw:: html
    :file: images/sphx_glr_plot_afq_callosal_001.html






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 12 minutes  5.689 seconds)


.. _sphx_glr_download_auto_examples_plot_afq_callosal.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_afq_callosal.py <plot_afq_callosal.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_afq_callosal.ipynb <plot_afq_callosal.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
