
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "howto/howto_examples/plot_accoustic_radiations.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_howto_howto_examples_plot_accoustic_radiations.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_howto_howto_examples_plot_accoustic_radiations.py:


===============================================================
How to add new bundles into pyAFQ(Accoustic Radiations Example)
===============================================================

pyAFQ is designed to be customizable and extensible. This example shows how you
can customize it to define a new bundle based on a definition of waypoint and
endpoint ROIs of your design. In this case, we add the accoustic radiations.

We start by importing some of the components that we need for this example and
fixing the random seed for reproducibility

.. GENERATED FROM PYTHON SOURCE LINES 14-26

.. code-block:: Python


    import os.path as op
    import plotly
    import numpy as np

    from AFQ.api.group import GroupAFQ
    import AFQ.api.bundle_dict as abd
    import AFQ.data.fetch as afd
    from AFQ.definitions.image import ImageFile, RoiImage
    np.random.seed(1234)









.. GENERATED FROM PYTHON SOURCE LINES 27-34

Get dMRI data
---------------
We will analyze one subject from the Healthy Brain Network Processed Open
Diffusion Derivatives dataset (HBN-POD2) [1]_, [2]_. We'll use a fetcher to
get preprocessed dMRI data for one of the >2,000 subjects in that study. The
data gets organized into a BIDS-compatible format in the `~/AFQ_data/HBN`
folder:

.. GENERATED FROM PYTHON SOURCE LINES 34-37

.. code-block:: Python


    study_dir = afd.fetch_hbn_preproc(["NDARAA948VFH"])[1]





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

      0%|          | 0/36 [00:00<?, ?it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_desc-brain_mask.nii.gz:   0%|          | 0/36 [00:00<?, ?it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_desc-brain_mask.nii.gz:   3%|▎         | 1/36 [00:00<00:12,  2.83it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_desc-preproc_T1w.nii.gz:   3%|▎         | 1/36 [00:00<00:12,  2.83it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_desc-preproc_T1w.nii.gz:   6%|▌         | 2/36 [00:02<00:43,  1.29s/it]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_dseg.nii.gz:   6%|▌         | 2/36 [00:02<00:43,  1.29s/it]                Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_dseg.nii.gz:   8%|▊         | 3/36 [00:02<00:25,  1.27it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_from-MNI152NLin2009cAsym_to-T1w_mode-image_xfm.h5:   8%|▊         | 3/36 [00:02<00:25,  1.27it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_from-MNI152NLin2009cAsym_to-T1w_mode-image_xfm.h5:  11%|█         | 4/36 [00:04<00:36,  1.15s/it]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_from-T1w_to-MNI152NLin2009cAsym_mode-image_xfm.h5:  11%|█         | 4/36 [00:04<00:36,  1.15s/it]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_from-T1w_to-MNI152NLin2009cAsym_mode-image_xfm.h5:  14%|█▍        | 5/36 [00:04<00:28,  1.08it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-CSF_probseg.nii.gz:  14%|█▍        | 5/36 [00:04<00:28,  1.08it/s]                             Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-CSF_probseg.nii.gz:  17%|█▋        | 6/36 [00:05<00:21,  1.41it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-GM_probseg.nii.gz:  17%|█▋        | 6/36 [00:05<00:21,  1.41it/s]     Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-GM_probseg.nii.gz:  19%|█▉        | 7/36 [00:05<00:17,  1.68it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-WM_probseg.nii.gz:  19%|█▉        | 7/36 [00:05<00:17,  1.68it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-WM_probseg.nii.gz:  22%|██▏       | 8/36 [00:05<00:14,  1.93it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_desc-brain_mask.nii.gz:  22%|██▏       | 8/36 [00:05<00:14,  1.93it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_desc-brain_mask.nii.gz:  25%|██▌       | 9/36 [00:05<00:11,  2.39it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_desc-preproc_T1w.nii.gz:  25%|██▌       | 9/36 [00:05<00:11,  2.39it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_desc-preproc_T1w.nii.gz:  28%|██▊       | 10/36 [00:06<00:10,  2.39it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_dseg.nii.gz:  28%|██▊       | 10/36 [00:06<00:10,  2.39it/s]                Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_dseg.nii.gz:  31%|███       | 11/36 [00:06<00:08,  2.87it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-CSF_probseg.nii.gz:  31%|███       | 11/36 [00:06<00:08,  2.87it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-CSF_probseg.nii.gz:  33%|███▎      | 12/36 [00:06<00:09,  2.67it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-GM_probseg.nii.gz:  33%|███▎      | 12/36 [00:06<00:09,  2.67it/s]     Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-GM_probseg.nii.gz:  36%|███▌      | 13/36 [00:07<00:08,  2.74it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-WM_probseg.nii.gz:  36%|███▌      | 13/36 [00:07<00:08,  2.74it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-WM_probseg.nii.gz:  39%|███▉      | 14/36 [00:07<00:08,  2.71it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_seg_brainmask.svg:  39%|███▉      | 14/36 [00:07<00:08,  2.71it/s]                                 Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_seg_brainmask.svg:  42%|████▏     | 15/36 [00:08<00:07,  2.72it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_carpetplot.svg:  42%|████▏     | 15/36 [00:08<00:07,  2.72it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_carpetplot.svg:  44%|████▍     | 16/36 [00:08<00:06,  3.23it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_coreg.svg:  44%|████▍     | 16/36 [00:08<00:06,  3.23it/s]         Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_coreg.svg:  47%|████▋     | 17/36 [00:08<00:05,  3.68it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-resampled_b0ref.svg:  47%|████▋     | 17/36 [00:08<00:05,  3.68it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-resampled_b0ref.svg:  50%|█████     | 18/36 [00:08<00:04,  3.97it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-sdc_b0.svg:  50%|█████     | 18/36 [00:08<00:04,  3.97it/s]             Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-sdc_b0.svg:  53%|█████▎    | 19/36 [00:08<00:03,  4.33it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_biascorr.svg:  53%|█████▎    | 19/36 [00:08<00:03,  4.33it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_biascorr.svg:  56%|█████▌    | 20/36 [00:09<00:03,  4.11it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_denoising.svg:  56%|█████▌    | 20/36 [00:09<00:03,  4.11it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_denoising.svg:  58%|█████▊    | 21/36 [00:09<00:04,  3.32it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_unringing.svg:  58%|█████▊    | 21/36 [00:09<00:04,  3.32it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_unringing.svg:  61%|██████    | 22/36 [00:09<00:04,  3.48it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_sampling_scheme.gif:  61%|██████    | 22/36 [00:09<00:04,  3.48it/s]                                         Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_sampling_scheme.gif:  64%|██████▍   | 23/36 [00:10<00:04,  3.16it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_t1_2_mni.svg:  64%|██████▍   | 23/36 [00:10<00:04,  3.16it/s]                                   Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_t1_2_mni.svg:  67%|██████▋   | 24/36 [00:10<00:03,  3.56it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/anat/sub-NDARAA948VFH_ses-HBNsiteRU_acq-HCP_from-orig_to-T1w_mode-image_xfm.txt:  67%|██████▋   | 24/36 [00:10<00:03,  3.56it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/anat/sub-NDARAA948VFH_ses-HBNsiteRU_acq-HCP_from-orig_to-T1w_mode-image_xfm.txt:  69%|██████▉   | 25/36 [00:10<00:02,  3.96it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_confounds.tsv:  69%|██████▉   | 25/36 [00:10<00:02,  3.96it/s]                         Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_confounds.tsv:  72%|███████▏  | 26/36 [00:10<00:02,  4.42it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-ImageQC_dwi.csv:  72%|███████▏  | 26/36 [00:10<00:02,  4.42it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-ImageQC_dwi.csv:  75%|███████▌  | 27/36 [00:10<00:01,  4.67it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-SliceQC_dwi.json:  75%|███████▌  | 27/36 [00:10<00:01,  4.67it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-SliceQC_dwi.json:  78%|███████▊  | 28/36 [00:11<00:01,  4.34it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwiqc.json:  78%|███████▊  | 28/36 [00:11<00:01,  4.34it/s]               Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwiqc.json:  81%|████████  | 29/36 [00:11<00:01,  3.54it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-brain_mask.nii.gz:  81%|████████  | 29/36 [00:11<00:01,  3.54it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-brain_mask.nii.gz:  83%|████████▎ | 30/36 [00:11<00:01,  4.04it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-eddy_cnr.nii.gz:  83%|████████▎ | 30/36 [00:11<00:01,  4.04it/s]      Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-eddy_cnr.nii.gz:  86%|████████▌ | 31/36 [00:11<00:01,  4.48it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.b:  86%|████████▌ | 31/36 [00:11<00:01,  4.48it/s]      Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.b:  89%|████████▉ | 32/36 [00:12<00:00,  4.63it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.bval:  89%|████████▉ | 32/36 [00:12<00:00,  4.63it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.bval:  92%|█████████▏| 33/36 [00:12<00:00,  4.97it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.bvec:  92%|█████████▏| 33/36 [00:12<00:00,  4.97it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.bvec:  94%|█████████▍| 34/36 [00:12<00:00,  5.24it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.nii.gz:  94%|█████████▍| 34/36 [00:12<00:00,  5.24it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.nii.gz:  97%|█████████▋| 35/36 [00:15<00:01,  1.10s/it]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_dwiref.nii.gz:  97%|█████████▋| 35/36 [00:15<00:01,  1.10s/it]              Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_dwiref.nii.gz: 100%|██████████| 36/36 [00:16<00:00,  1.13it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_dwiref.nii.gz: 100%|██████████| 36/36 [00:16<00:00,  2.25it/s]




.. GENERATED FROM PYTHON SOURCE LINES 38-48

Define custom `BundleDict` object
--------------------------------
The `BundleDict` object holds information about "include" and "exclude" ROIs,
as well as endpoint ROIS, and whether the bundle crosses the midline. In this
case, the ROIs are all defined in the MNI template space that is used as the
default template space in pyAFQ, but, in principle, other template spaces
could be used.

The ROIs for the case can be downloaded using a custom fetcher which saves
the ROIs to a folder and creates a dictionary of paths to the ROIs:

.. GENERATED FROM PYTHON SOURCE LINES 48-65

.. code-block:: Python


    ar_rois = afd.read_ar_templates()

    bundles = abd.BundleDict({
        "AR_L": {
            "start": ar_rois["AAL_Thal_L"],
            "end": ar_rois["AAL_TempSup_L"],
            "cross_midline": False,
        },
        "AR_R": {
            "start": ar_rois["AAL_Thal_R"],
            "end": ar_rois["AAL_TempSup_R"],
            "cross_midline": False
        }
    })






.. rst-class:: sphx-glr-script-out

 .. code-block:: none

      0%|          | 0/16 [00:00<?, ? MB/s]      6%|▋         | 1/16 [00:00<00:02,  6.34 MB/s]     19%|█▉        | 3/16 [00:00<00:01, 10.03 MB/s]     44%|████▍     | 7/16 [00:00<00:00, 16.96 MB/s]    100%|██████████| 16/16 [00:00<00:00, 33.50 MB/s]
      0%|          | 0/16 [00:00<?, ? MB/s]     12%|█▎        | 2/16 [00:00<00:01, 12.53 MB/s]     25%|██▌       | 4/16 [00:00<00:00, 12.52 MB/s]     50%|█████     | 8/16 [00:00<00:00, 18.23 MB/s]    100%|██████████| 16/16 [00:00<00:00, 33.30 MB/s]
      0%|          | 0/16 [00:00<?, ? MB/s]     12%|█▎        | 2/16 [00:00<00:01, 12.68 MB/s]     25%|██▌       | 4/16 [00:00<00:00, 12.65 MB/s]     50%|█████     | 8/16 [00:00<00:00, 18.40 MB/s]    100%|██████████| 16/16 [00:00<00:00, 33.63 MB/s]
      0%|          | 0/16 [00:00<?, ? MB/s]      6%|▋         | 1/16 [00:00<00:02,  6.28 MB/s]     19%|█▉        | 3/16 [00:00<00:01,  9.94 MB/s]     38%|███▊      | 6/16 [00:00<00:00, 13.97 MB/s]     81%|████████▏ | 13/16 [00:00<00:00, 25.73 MB/s]    100%|██████████| 16/16 [00:00<00:00, 25.00 MB/s]
    Downloading https://templateflow.s3.amazonaws.com/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_T2w.nii.gz
      0%|          | 0.00/13.3M [00:00<?, ?B/s]      0%|          | 52.2k/13.3M [00:00<00:33, 397kB/s]      2%|▏         | 261k/13.3M [00:00<00:11, 1.09MB/s]      8%|▊         | 1.06M/13.3M [00:00<00:03, 3.35MB/s]     30%|██▉       | 3.92M/13.3M [00:00<00:00, 10.5MB/s]     60%|██████    | 8.04M/13.3M [00:00<00:00, 17.9MB/s]     92%|█████████▏| 12.2M/13.3M [00:00<00:00, 22.6MB/s]    100%|██████████| 13.3M/13.3M [00:00<00:00, 16.4MB/s]
    Downloading https://templateflow.s3.amazonaws.com/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_desc-brain_mask.nii.gz
      0%|          | 0.00/160k [00:00<?, ?B/s]     35%|███▌      | 56.3k/160k [00:00<00:00, 404kB/s]    100%|██████████| 160k/160k [00:00<00:00, 759kB/s] 




.. GENERATED FROM PYTHON SOURCE LINES 66-81

Define GroupAFQ object
----------------------
HBN POD2 have been processed with qsiprep [3]_. This means that a brain mask
has already been computer for them. As you can see in other examples, these
data also have a mapping calculated for them, which can also be incorporated
into processing. However, in this case, we will let pyAFQ calculate its own
SyN-based mapping so that the `combine_bundle` method can be used below to
create a montage visualization.

For tractography, we use CSD-based probabilistic tractography seeding
extensively (`n_seeds=4` means 81 seeds per voxel!), but only within the ROIs
and not throughout the white matter. This is controlled by passing
`"seed_mask": RoiImage()` in the `tracking_params` dict. The custom bundles
are passed as `bundle_info=bundles`. The call to `my_afq.export_all()`
initiates the pipeline.

.. GENERATED FROM PYTHON SOURCE LINES 81-102

.. code-block:: Python


    brain_mask_definition = ImageFile(
        suffix="mask",
        filters={'desc': 'brain',
                 'space': 'T1w',
                 'scope': 'qsiprep'})

    my_afq = GroupAFQ(
        bids_path=study_dir,
        preproc_pipeline="qsiprep",
        participant_labels=["NDARAA948VFH"],
        output_dir=op.join(study_dir, "derivatives", "afq_ar"),
        brain_mask_definition=brain_mask_definition,
        tracking_params={"n_seeds": 4,
                         "directions": "prob",
                         "odf_model": "CSD",
                         "seed_mask": RoiImage(use_endpoints=True)},
        bundle_info=bundles)

    my_afq.export_all()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

      0%|          | 0/234119.0 [00:00<?, ?it/s]      0%|          | 132/234119.0 [00:00<02:57, 1317.21it/s]      0%|          | 591/234119.0 [00:00<01:12, 3239.27it/s]      0%|          | 1085/234119.0 [00:00<00:58, 4010.07it/s]      1%|          | 1561/234119.0 [00:00<00:54, 4304.65it/s]      1%|          | 2067/234119.0 [00:00<00:50, 4575.36it/s]      1%|          | 2570/234119.0 [00:00<00:48, 4728.99it/s]      1%|▏         | 3094/234119.0 [00:00<00:47, 4895.72it/s]      2%|▏         | 3610/234119.0 [00:00<00:46, 4979.05it/s]      2%|▏         | 4127/234119.0 [00:00<00:45, 5037.81it/s]      2%|▏         | 4631/234119.0 [00:01<00:45, 5019.93it/s]      2%|▏         | 5146/234119.0 [00:01<00:45, 5058.51it/s]      2%|▏         | 5652/234119.0 [00:01<00:45, 5057.98it/s]      3%|▎         | 6162/234119.0 [00:01<00:44, 5070.19it/s]      3%|▎         | 6673/234119.0 [00:01<00:44, 5080.93it/s]      3%|▎         | 7199/234119.0 [00:01<00:44, 5134.68it/s]      3%|▎         | 7718/234119.0 [00:01<00:43, 5150.27it/s]      4%|▎         | 8234/234119.0 [00:01<00:44, 5118.02it/s]      4%|▎         | 8758/234119.0 [00:01<00:43, 5154.00it/s]      4%|▍         | 9276/234119.0 [00:01<00:43, 5161.47it/s]      4%|▍         | 9795/234119.0 [00:02<00:43, 5169.15it/s]      4%|▍         | 10312/234119.0 [00:02<00:43, 5136.34it/s]      5%|▍         | 10838/234119.0 [00:02<00:43, 5171.65it/s]      5%|▍         | 11360/234119.0 [00:02<00:42, 5182.45it/s]      5%|▌         | 11883/234119.0 [00:02<00:42, 5193.80it/s]      5%|▌         | 12403/234119.0 [00:02<00:43, 5148.34it/s]      6%|▌         | 12938/234119.0 [00:02<00:42, 5206.54it/s]      6%|▌         | 13459/234119.0 [00:02<00:42, 5192.08it/s]      6%|▌         | 13979/234119.0 [00:02<00:42, 5183.66it/s]      6%|▌         | 14516/234119.0 [00:02<00:41, 5238.53it/s]      6%|▋         | 15040/234119.0 [00:03<00:42, 5188.60it/s]      7%|▋         | 15570/234119.0 [00:03<00:41, 5221.55it/s]      7%|▋         | 16093/234119.0 [00:03<00:42, 5146.48it/s]      7%|▋         | 16620/234119.0 [00:03<00:41, 5180.94it/s]      7%|▋         | 17154/234119.0 [00:03<00:41, 5227.71it/s]      8%|▊         | 17678/234119.0 [00:03<00:41, 5199.15it/s]      8%|▊         | 18213/234119.0 [00:03<00:41, 5242.15it/s]      8%|▊         | 18744/234119.0 [00:03<00:40, 5258.48it/s]      8%|▊         | 19271/234119.0 [00:03<00:40, 5260.03it/s]      8%|▊         | 19799/234119.0 [00:03<00:40, 5264.57it/s]      9%|▊         | 20326/234119.0 [00:04<00:41, 5208.94it/s]      9%|▉         | 20864/234119.0 [00:04<00:40, 5257.04it/s]      9%|▉         | 21394/234119.0 [00:04<00:40, 5268.27it/s]      9%|▉         | 21932/234119.0 [00:04<00:40, 5299.96it/s]     10%|▉         | 22463/234119.0 [00:04<00:40, 5272.20it/s]     10%|▉         | 23006/234119.0 [00:04<00:39, 5318.79it/s]     10%|█         | 23538/234119.0 [00:04<00:40, 5240.30it/s]     10%|█         | 24075/234119.0 [00:04<00:39, 5276.40it/s]     11%|█         | 24617/234119.0 [00:04<00:39, 5318.33it/s]     11%|█         | 25150/234119.0 [00:04<00:41, 5043.37it/s]     11%|█         | 25682/234119.0 [00:05<00:40, 5121.98it/s]     11%|█         | 26218/234119.0 [00:05<00:40, 5190.69it/s]     11%|█▏        | 26739/234119.0 [00:05<00:40, 5106.64it/s]     12%|█▏        | 27283/234119.0 [00:05<00:39, 5202.61it/s]     12%|█▏        | 27822/234119.0 [00:05<00:39, 5254.12it/s]     12%|█▏        | 28370/234119.0 [00:05<00:38, 5319.44it/s]     12%|█▏        | 28903/234119.0 [00:05<00:38, 5276.33it/s]     13%|█▎        | 29432/234119.0 [00:05<00:38, 5275.44it/s]     13%|█▎        | 29963/234119.0 [00:05<00:38, 5284.88it/s]     13%|█▎        | 30492/234119.0 [00:05<00:38, 5250.08it/s]     13%|█▎        | 31023/234119.0 [00:06<00:38, 5266.55it/s]     13%|█▎        | 31576/234119.0 [00:06<00:37, 5344.13it/s]     14%|█▎        | 32111/234119.0 [00:06<00:37, 5323.13it/s]     14%|█▍        | 32647/234119.0 [00:06<00:37, 5332.66it/s]     14%|█▍        | 33181/234119.0 [00:06<00:37, 5334.25it/s]     14%|█▍        | 33715/234119.0 [00:06<00:38, 5245.17it/s]     15%|█▍        | 34240/234119.0 [00:06<01:02, 3216.09it/s]     15%|█▍        | 34783/234119.0 [00:06<00:54, 3670.85it/s]     15%|█▌        | 35336/234119.0 [00:07<00:48, 4091.91it/s]     15%|█▌        | 35870/234119.0 [00:07<00:45, 4396.17it/s]     16%|█▌        | 36409/234119.0 [00:07<00:42, 4653.10it/s]     16%|█▌        | 36955/234119.0 [00:07<00:40, 4867.49it/s]     16%|█▌        | 37477/234119.0 [00:07<00:39, 4962.88it/s]     16%|█▌        | 38012/234119.0 [00:07<00:38, 5072.28it/s]     16%|█▋        | 38550/234119.0 [00:07<00:37, 5158.23it/s]     17%|█▋        | 39094/234119.0 [00:07<00:37, 5238.68it/s]     17%|█▋        | 39628/234119.0 [00:07<00:37, 5243.78it/s]     17%|█▋        | 40171/234119.0 [00:07<00:36, 5298.05it/s]     17%|█▋        | 40709/234119.0 [00:08<00:36, 5319.97it/s]     18%|█▊        | 41245/234119.0 [00:08<00:36, 5287.10it/s]     18%|█▊        | 41777/234119.0 [00:08<00:37, 5195.59it/s]     18%|█▊        | 42316/234119.0 [00:08<00:36, 5249.44it/s]     18%|█▊        | 42864/234119.0 [00:08<00:35, 5315.69it/s]     19%|█▊        | 43397/234119.0 [00:08<00:36, 5275.65it/s]     19%|█▉        | 43944/234119.0 [00:08<00:35, 5332.61it/s]     19%|█▉        | 44491/234119.0 [00:08<00:35, 5371.82it/s]     19%|█▉        | 45029/234119.0 [00:08<00:35, 5303.12it/s]     19%|█▉        | 45562/234119.0 [00:09<00:35, 5309.25it/s]     20%|█▉        | 46094/234119.0 [00:09<00:35, 5302.85it/s]     20%|█▉        | 46625/234119.0 [00:09<00:35, 5273.49it/s]     20%|██        | 47164/234119.0 [00:09<00:35, 5306.51it/s]     20%|██        | 47708/234119.0 [00:09<00:34, 5344.99it/s]     21%|██        | 48246/234119.0 [00:09<00:34, 5354.81it/s]     21%|██        | 48782/234119.0 [00:09<00:34, 5331.65it/s]     21%|██        | 49316/234119.0 [00:09<00:34, 5302.44it/s]     21%|██▏       | 49850/234119.0 [00:09<00:34, 5310.56it/s]     22%|██▏       | 50382/234119.0 [00:09<00:34, 5303.89it/s]     22%|██▏       | 50920/234119.0 [00:10<00:34, 5326.57it/s]     22%|██▏       | 51467/234119.0 [00:10<00:34, 5368.66it/s]     22%|██▏       | 52036/234119.0 [00:10<00:33, 5462.01it/s]     22%|██▏       | 52583/234119.0 [00:10<00:33, 5454.14it/s]     23%|██▎       | 53129/234119.0 [00:10<00:33, 5407.80it/s]     23%|██▎       | 53670/234119.0 [00:10<00:33, 5374.25it/s]     23%|██▎       | 54208/234119.0 [00:10<00:33, 5367.47it/s]     23%|██▎       | 54753/234119.0 [00:10<00:33, 5391.35it/s]     24%|██▎       | 55293/234119.0 [00:10<00:33, 5296.82it/s]     24%|██▍       | 55824/234119.0 [00:10<00:33, 5252.79it/s]     24%|██▍       | 56359/234119.0 [00:11<00:33, 5278.59it/s]     24%|██▍       | 56892/234119.0 [00:11<00:33, 5293.08it/s]     25%|██▍       | 57422/234119.0 [00:11<00:34, 5175.33it/s]     25%|██▍       | 57941/234119.0 [00:11<00:34, 5062.31it/s]     25%|██▍       | 58479/234119.0 [00:11<00:34, 5154.37it/s]     25%|██▌       | 59026/234119.0 [00:11<00:33, 5245.07it/s]     25%|██▌       | 59576/234119.0 [00:11<00:32, 5316.29it/s]     26%|██▌       | 60128/234119.0 [00:11<00:32, 5375.62it/s]     26%|██▌       | 60676/234119.0 [00:11<00:32, 5403.92it/s]     26%|██▌       | 61217/234119.0 [00:11<00:32, 5369.54it/s]     26%|██▋       | 61755/234119.0 [00:12<00:32, 5294.09it/s]     27%|██▋       | 62285/234119.0 [00:12<00:32, 5276.75it/s]     27%|██▋       | 62834/234119.0 [00:12<00:32, 5338.19it/s]     27%|██▋       | 63389/234119.0 [00:12<00:31, 5399.22it/s]     27%|██▋       | 63930/234119.0 [00:12<00:31, 5382.96it/s]     28%|██▊       | 64484/234119.0 [00:12<00:31, 5429.49it/s]     28%|██▊       | 65042/234119.0 [00:12<00:30, 5473.73it/s]     28%|██▊       | 65590/234119.0 [00:12<00:31, 5423.90it/s]     28%|██▊       | 66133/234119.0 [00:12<00:31, 5351.68it/s]     28%|██▊       | 66670/234119.0 [00:12<00:31, 5354.16it/s]     29%|██▊       | 67225/234119.0 [00:13<00:30, 5410.97it/s]     29%|██▉       | 67776/234119.0 [00:13<00:30, 5440.22it/s]     29%|██▉       | 68321/234119.0 [00:13<00:30, 5436.61it/s]     29%|██▉       | 68871/234119.0 [00:13<00:30, 5454.36it/s]     30%|██▉       | 69428/234119.0 [00:13<00:30, 5488.85it/s]     30%|██▉       | 69977/234119.0 [00:13<00:30, 5436.12it/s]     30%|███       | 70521/234119.0 [00:13<00:30, 5410.45it/s]     30%|███       | 71063/234119.0 [00:13<00:30, 5410.85it/s]     31%|███       | 71613/234119.0 [00:13<00:29, 5435.84it/s]     31%|███       | 72157/234119.0 [00:13<00:29, 5434.92it/s]     31%|███       | 72708/234119.0 [00:14<00:29, 5456.19it/s]     31%|███▏      | 73270/234119.0 [00:14<00:29, 5502.93it/s]     32%|███▏      | 73838/234119.0 [00:14<00:28, 5555.42it/s]     32%|███▏      | 74394/234119.0 [00:14<00:29, 5403.98it/s]     32%|███▏      | 74936/234119.0 [00:14<00:29, 5369.48it/s]     32%|███▏      | 75480/234119.0 [00:14<00:29, 5387.85it/s]     32%|███▏      | 76027/234119.0 [00:14<00:29, 5410.47it/s]     33%|███▎      | 76573/234119.0 [00:14<00:29, 5423.05it/s]     33%|███▎      | 77125/234119.0 [00:14<00:28, 5450.46it/s]     33%|███▎      | 77678/234119.0 [00:14<00:28, 5471.85it/s]     33%|███▎      | 78243/234119.0 [00:15<00:28, 5522.87it/s]     34%|███▎      | 78796/234119.0 [00:15<00:28, 5445.57it/s]     34%|███▍      | 79341/234119.0 [00:15<00:28, 5420.70it/s]     34%|███▍      | 79884/234119.0 [00:15<00:28, 5411.57it/s]     34%|███▍      | 80426/234119.0 [00:15<00:28, 5391.23it/s]     35%|███▍      | 80975/234119.0 [00:15<00:28, 5419.87it/s]     35%|███▍      | 81518/234119.0 [00:15<00:28, 5420.71it/s]     35%|███▌      | 82067/234119.0 [00:15<00:27, 5439.42it/s]     35%|███▌      | 82628/234119.0 [00:15<00:27, 5489.13it/s]     36%|███▌      | 83177/234119.0 [00:15<00:27, 5433.55it/s]     36%|███▌      | 83721/234119.0 [00:16<00:27, 5393.50it/s]     36%|███▌      | 84265/234119.0 [00:16<00:27, 5404.45it/s]     36%|███▌      | 84806/234119.0 [00:16<00:27, 5405.57it/s]     36%|███▋      | 85347/234119.0 [00:16<00:27, 5370.94it/s]     37%|███▋      | 85911/234119.0 [00:16<00:27, 5449.95it/s]     37%|███▋      | 86467/234119.0 [00:16<00:26, 5482.28it/s]     37%|███▋      | 87016/234119.0 [00:16<00:26, 5467.74it/s]     37%|███▋      | 87563/234119.0 [00:16<00:26, 5431.25it/s]     38%|███▊      | 88107/234119.0 [00:16<00:27, 5379.39it/s]     38%|███▊      | 88646/234119.0 [00:17<00:27, 5356.47it/s]     38%|███▊      | 89182/234119.0 [00:17<00:27, 5331.37it/s]     38%|███▊      | 89716/234119.0 [00:17<00:27, 5328.29it/s]     39%|███▊      | 90268/234119.0 [00:17<00:26, 5384.49it/s]     39%|███▉      | 90819/234119.0 [00:17<00:26, 5421.26it/s]     39%|███▉      | 91364/234119.0 [00:17<00:26, 5427.68it/s]     39%|███▉      | 91907/234119.0 [00:17<00:26, 5414.04it/s]     39%|███▉      | 92449/234119.0 [00:17<00:26, 5383.84it/s]     40%|███▉      | 92988/234119.0 [00:17<00:26, 5331.62it/s]     40%|███▉      | 93522/234119.0 [00:17<00:26, 5314.17it/s]     40%|████      | 94061/234119.0 [00:18<00:26, 5336.38it/s]     40%|████      | 94595/234119.0 [00:18<00:26, 5316.40it/s]     41%|████      | 95140/234119.0 [00:18<00:25, 5354.88it/s]     41%|████      | 95677/234119.0 [00:18<00:25, 5358.93it/s]     41%|████      | 96213/234119.0 [00:18<00:25, 5335.83it/s]     41%|████▏     | 96747/234119.0 [00:18<00:25, 5326.82it/s]     42%|████▏     | 97280/234119.0 [00:18<00:25, 5292.45it/s]     42%|████▏     | 97815/234119.0 [00:18<00:25, 5307.97it/s]     42%|████▏     | 98356/234119.0 [00:18<00:25, 5336.24it/s]     42%|████▏     | 98900/234119.0 [00:18<00:25, 5365.00it/s]     42%|████▏     | 99450/234119.0 [00:19<00:24, 5403.71it/s]     43%|████▎     | 99994/234119.0 [00:19<00:24, 5414.49it/s]     43%|████▎     | 100539/234119.0 [00:19<00:24, 5423.68it/s]     43%|████▎     | 101082/234119.0 [00:19<00:24, 5346.38it/s]     43%|████▎     | 101617/234119.0 [00:19<00:25, 5298.89it/s]     44%|████▎     | 102161/234119.0 [00:19<00:24, 5338.49it/s]     44%|████▍     | 102698/234119.0 [00:19<00:24, 5346.57it/s]     44%|████▍     | 103233/234119.0 [00:19<00:26, 5003.53it/s]     44%|████▍     | 103783/234119.0 [00:19<00:25, 5142.82it/s]     45%|████▍     | 104329/234119.0 [00:19<00:24, 5233.98it/s]     45%|████▍     | 104880/234119.0 [00:20<00:24, 5312.89it/s]     45%|████▌     | 105414/234119.0 [00:20<00:24, 5279.02it/s]     45%|████▌     | 105968/234119.0 [00:20<00:23, 5354.42it/s]     45%|████▌     | 106519/234119.0 [00:20<00:23, 5399.70it/s]     46%|████▌     | 107075/234119.0 [00:20<00:23, 5445.58it/s]     46%|████▌     | 107637/234119.0 [00:20<00:23, 5497.18it/s]     46%|████▌     | 108188/234119.0 [00:20<00:23, 5473.14it/s]     46%|████▋     | 108737/234119.0 [00:20<00:22, 5477.83it/s]     47%|████▋     | 109286/234119.0 [00:20<00:22, 5444.99it/s]     47%|████▋     | 109831/234119.0 [00:20<00:22, 5422.45it/s]     47%|████▋     | 110393/234119.0 [00:21<00:22, 5480.03it/s]     47%|████▋     | 110942/234119.0 [00:21<00:22, 5434.78it/s]     48%|████▊     | 111503/234119.0 [00:21<00:22, 5484.72it/s]     48%|████▊     | 112052/234119.0 [00:21<00:22, 5478.55it/s]     48%|████▊     | 112600/234119.0 [00:21<00:22, 5429.48it/s]     48%|████▊     | 113144/234119.0 [00:21<00:22, 5395.10it/s]     49%|████▊     | 113684/234119.0 [00:21<00:22, 5350.66it/s]     49%|████▉     | 114220/234119.0 [00:21<00:34, 3513.66it/s]     49%|████▉     | 114764/234119.0 [00:22<00:30, 3931.61it/s]     49%|████▉     | 115305/234119.0 [00:22<00:27, 4280.03it/s]     49%|████▉     | 115861/234119.0 [00:22<00:25, 4602.02it/s]     50%|████▉     | 116402/234119.0 [00:22<00:24, 4813.92it/s]     50%|████▉     | 116959/234119.0 [00:22<00:23, 5020.51it/s]     50%|█████     | 117503/234119.0 [00:22<00:22, 5138.15it/s]     50%|█████     | 118051/234119.0 [00:22<00:22, 5235.48it/s]     51%|█████     | 118604/234119.0 [00:22<00:21, 5316.49it/s]     51%|█████     | 119146/234119.0 [00:22<00:21, 5305.34it/s]     51%|█████     | 119691/234119.0 [00:22<00:21, 5347.09it/s]     51%|█████▏    | 120239/234119.0 [00:23<00:21, 5385.74it/s]     52%|█████▏    | 120793/234119.0 [00:23<00:20, 5430.47it/s]     52%|█████▏    | 121362/234119.0 [00:23<00:20, 5506.67it/s]     52%|█████▏    | 121915/234119.0 [00:23<00:20, 5456.31it/s]     52%|█████▏    | 122463/234119.0 [00:23<00:21, 5315.21it/s]     53%|█████▎    | 123002/234119.0 [00:23<00:20, 5334.71it/s]     53%|█████▎    | 123537/234119.0 [00:23<00:20, 5333.91it/s]     53%|█████▎    | 124085/234119.0 [00:23<00:20, 5376.42it/s]     53%|█████▎    | 124632/234119.0 [00:23<00:20, 5403.16it/s]     53%|█████▎    | 125202/234119.0 [00:23<00:19, 5490.53it/s]     54%|█████▎    | 125757/234119.0 [00:24<00:19, 5507.03it/s]     54%|█████▍    | 126308/234119.0 [00:24<00:19, 5432.08it/s]     54%|█████▍    | 126852/234119.0 [00:24<00:19, 5407.95it/s]     54%|█████▍    | 127394/234119.0 [00:24<00:19, 5381.29it/s]     55%|█████▍    | 127944/234119.0 [00:24<00:19, 5414.66it/s]     55%|█████▍    | 128497/234119.0 [00:24<00:19, 5447.70it/s]     55%|█████▌    | 129042/234119.0 [00:24<00:19, 5436.30it/s]     55%|█████▌    | 129601/234119.0 [00:24<00:19, 5481.69it/s]     56%|█████▌    | 130153/234119.0 [00:24<00:18, 5492.91it/s]     56%|█████▌    | 130703/234119.0 [00:24<00:19, 5418.82it/s]     56%|█████▌    | 131246/234119.0 [00:25<00:19, 5376.84it/s]     56%|█████▋    | 131784/234119.0 [00:25<00:19, 5365.08it/s]     57%|█████▋    | 132321/234119.0 [00:25<00:18, 5365.36it/s]     57%|█████▋    | 132860/234119.0 [00:25<00:18, 5372.44it/s]     57%|█████▋    | 133403/234119.0 [00:25<00:18, 5387.29it/s]     57%|█████▋    | 133955/234119.0 [00:25<00:18, 5426.37it/s]     57%|█████▋    | 134518/234119.0 [00:25<00:18, 5487.15it/s]     58%|█████▊    | 135067/234119.0 [00:25<00:18, 5443.27it/s]     58%|█████▊    | 135616/234119.0 [00:25<00:18, 5455.59it/s]     58%|█████▊    | 136162/234119.0 [00:25<00:18, 5422.35it/s]     58%|█████▊    | 136705/234119.0 [00:26<00:18, 5402.31it/s]     59%|█████▊    | 137250/234119.0 [00:26<00:17, 5414.34it/s]     59%|█████▉    | 137792/234119.0 [00:26<00:17, 5410.13it/s]     59%|█████▉    | 138337/234119.0 [00:26<00:17, 5421.56it/s]     59%|█████▉    | 138880/234119.0 [00:26<00:17, 5385.07it/s]     60%|█████▉    | 139441/234119.0 [00:26<00:17, 5449.06it/s]     60%|█████▉    | 139986/234119.0 [00:26<00:17, 5399.77it/s]     60%|██████    | 140527/234119.0 [00:26<00:17, 5395.69it/s]     60%|██████    | 141067/234119.0 [00:26<00:17, 5366.32it/s]     60%|██████    | 141612/234119.0 [00:27<00:17, 5388.53it/s]     61%|██████    | 142158/234119.0 [00:27<00:17, 5409.21it/s]     61%|██████    | 142713/234119.0 [00:27<00:16, 5450.89it/s]     61%|██████    | 143260/234119.0 [00:27<00:16, 5454.69it/s]     61%|██████▏   | 143810/234119.0 [00:27<00:16, 5466.24it/s]     62%|██████▏   | 144357/234119.0 [00:27<00:16, 5389.23it/s]     62%|██████▏   | 144897/234119.0 [00:27<00:16, 5367.08it/s]     62%|██████▏   | 145437/234119.0 [00:27<00:16, 5375.08it/s]     62%|██████▏   | 145975/234119.0 [00:27<00:16, 5373.34it/s]     63%|██████▎   | 146521/234119.0 [00:27<00:16, 5398.57it/s]     63%|██████▎   | 147073/234119.0 [00:28<00:16, 5433.98it/s]     63%|██████▎   | 147635/234119.0 [00:28<00:15, 5488.59it/s]     63%|██████▎   | 148194/234119.0 [00:28<00:15, 5517.46it/s]     64%|██████▎   | 148746/234119.0 [00:28<00:15, 5451.55it/s]     64%|██████▍   | 149292/234119.0 [00:28<00:15, 5362.64it/s]     64%|██████▍   | 149829/234119.0 [00:28<00:15, 5328.74it/s]     64%|██████▍   | 150374/234119.0 [00:28<00:15, 5364.42it/s]     64%|██████▍   | 150928/234119.0 [00:28<00:15, 5415.11it/s]     65%|██████▍   | 151474/234119.0 [00:28<00:15, 5425.45it/s]     65%|██████▍   | 152021/234119.0 [00:28<00:15, 5438.05it/s]     65%|██████▌   | 152590/234119.0 [00:29<00:14, 5511.81it/s]     65%|██████▌   | 153142/234119.0 [00:29<00:14, 5439.40it/s]     66%|██████▌   | 153687/234119.0 [00:29<00:14, 5401.97it/s]     66%|██████▌   | 154257/234119.0 [00:29<00:14, 5488.77it/s]     66%|██████▌   | 154807/234119.0 [00:29<00:14, 5437.57it/s]     66%|██████▋   | 155358/234119.0 [00:29<00:14, 5456.97it/s]     67%|██████▋   | 155915/234119.0 [00:29<00:14, 5489.82it/s]     67%|██████▋   | 156465/234119.0 [00:29<00:14, 5485.03it/s]     67%|██████▋   | 157015/234119.0 [00:29<00:14, 5488.06it/s]     67%|██████▋   | 157564/234119.0 [00:29<00:14, 5406.72it/s]     68%|██████▊   | 158108/234119.0 [00:30<00:14, 5415.07it/s]     68%|██████▊   | 158658/234119.0 [00:30<00:13, 5438.97it/s]     68%|██████▊   | 159203/234119.0 [00:30<00:13, 5397.36it/s]     68%|██████▊   | 159758/234119.0 [00:30<00:13, 5439.82it/s]     68%|██████▊   | 160303/234119.0 [00:30<00:13, 5423.20it/s]     69%|██████▊   | 160846/234119.0 [00:30<00:13, 5358.41it/s]     69%|██████▉   | 161402/234119.0 [00:30<00:13, 5416.03it/s]     69%|██████▉   | 161944/234119.0 [00:30<00:13, 5365.05it/s]     69%|██████▉   | 162481/234119.0 [00:30<00:13, 5357.79it/s]     70%|██████▉   | 163024/234119.0 [00:30<00:13, 5378.60it/s]     70%|██████▉   | 163562/234119.0 [00:31<00:13, 5368.08it/s]     70%|███████   | 164113/234119.0 [00:31<00:12, 5409.68it/s]     70%|███████   | 164655/234119.0 [00:31<00:12, 5395.45it/s]     71%|███████   | 165223/234119.0 [00:31<00:12, 5478.31it/s]     71%|███████   | 165778/234119.0 [00:31<00:12, 5498.52it/s]     71%|███████   | 166328/234119.0 [00:31<00:12, 5380.26it/s]     71%|███████▏  | 166867/234119.0 [00:31<00:12, 5335.06it/s]     72%|███████▏  | 167419/234119.0 [00:31<00:12, 5386.87it/s]     72%|███████▏  | 167971/234119.0 [00:31<00:12, 5423.72it/s]     72%|███████▏  | 168514/234119.0 [00:31<00:12, 5420.45it/s]     72%|███████▏  | 169060/234119.0 [00:32<00:11, 5431.29it/s]     72%|███████▏  | 169628/234119.0 [00:32<00:11, 5502.35it/s]     73%|███████▎  | 170179/234119.0 [00:32<00:11, 5492.61it/s]     73%|███████▎  | 170729/234119.0 [00:32<00:11, 5457.45it/s]     73%|███████▎  | 171275/234119.0 [00:32<00:11, 5442.57it/s]     73%|███████▎  | 171820/234119.0 [00:32<00:11, 5334.33it/s]     74%|███████▎  | 172366/234119.0 [00:32<00:11, 5371.17it/s]     74%|███████▍  | 172914/234119.0 [00:32<00:11, 5398.99it/s]     74%|███████▍  | 173472/234119.0 [00:32<00:11, 5449.75it/s]     74%|███████▍  | 174046/234119.0 [00:32<00:10, 5533.99it/s]     75%|███████▍  | 174600/234119.0 [00:33<00:10, 5495.87it/s]     75%|███████▍  | 175150/234119.0 [00:33<00:10, 5422.98it/s]     75%|███████▌  | 175699/234119.0 [00:33<00:10, 5441.32it/s]     75%|███████▌  | 176245/234119.0 [00:33<00:10, 5445.11it/s]     76%|███████▌  | 176790/234119.0 [00:33<00:10, 5432.14it/s]     76%|███████▌  | 177343/234119.0 [00:33<00:10, 5459.48it/s]     76%|███████▌  | 177904/234119.0 [00:33<00:10, 5499.68it/s]     76%|███████▌  | 178455/234119.0 [00:33<00:10, 5476.52it/s]     76%|███████▋  | 179003/234119.0 [00:33<00:10, 5432.16it/s]     77%|███████▋  | 179547/234119.0 [00:33<00:10, 5428.22it/s]     77%|███████▋  | 180096/234119.0 [00:34<00:09, 5444.85it/s]     77%|███████▋  | 180641/234119.0 [00:34<00:09, 5424.68it/s]     77%|███████▋  | 181192/234119.0 [00:34<00:09, 5448.71it/s]     78%|███████▊  | 181751/234119.0 [00:34<00:09, 5490.78it/s]     78%|███████▊  | 182303/234119.0 [00:34<00:09, 5497.35it/s]     78%|███████▊  | 182853/234119.0 [00:34<00:09, 5420.83it/s]     78%|███████▊  | 183396/234119.0 [00:34<00:09, 5416.20it/s]     79%|███████▊  | 183938/234119.0 [00:34<00:09, 5402.72it/s]     79%|███████▉  | 184479/234119.0 [00:34<00:09, 5359.25it/s]     79%|███████▉  | 185022/234119.0 [00:35<00:09, 5377.28it/s]     79%|███████▉  | 185560/234119.0 [00:35<00:09, 5367.39it/s]     79%|███████▉  | 186097/234119.0 [00:35<00:08, 5348.35it/s]     80%|███████▉  | 186642/234119.0 [00:35<00:08, 5375.21it/s]     80%|███████▉  | 187180/234119.0 [00:35<00:08, 5313.35it/s]     80%|████████  | 187719/234119.0 [00:35<00:08, 5335.99it/s]     80%|████████  | 188253/234119.0 [00:35<00:08, 5313.37it/s]     81%|████████  | 188796/234119.0 [00:35<00:08, 5347.78it/s]     81%|████████  | 189347/234119.0 [00:35<00:08, 5395.48it/s]     81%|████████  | 189887/234119.0 [00:35<00:08, 5370.75it/s]     81%|████████▏ | 190425/234119.0 [00:36<00:08, 5362.31it/s]     82%|████████▏ | 190962/234119.0 [00:36<00:08, 5326.33it/s]     82%|████████▏ | 191499/234119.0 [00:36<00:07, 5337.46it/s]     82%|████████▏ | 192034/234119.0 [00:36<00:07, 5338.85it/s]     82%|████████▏ | 192571/234119.0 [00:36<00:07, 5345.65it/s]     82%|████████▏ | 193115/234119.0 [00:36<00:07, 5372.02it/s]     83%|████████▎ | 193656/234119.0 [00:36<00:07, 5382.34it/s]     83%|████████▎ | 194195/234119.0 [00:36<00:07, 5367.05it/s]     83%|████████▎ | 194732/234119.0 [00:36<00:07, 5349.02it/s]     83%|████████▎ | 195271/234119.0 [00:36<00:07, 5358.64it/s]     84%|████████▎ | 195807/234119.0 [00:37<00:07, 5358.25it/s]     84%|████████▍ | 196346/234119.0 [00:37<00:07, 5365.30it/s]     84%|████████▍ | 196883/234119.0 [00:37<00:06, 5329.85it/s]     84%|████████▍ | 197417/234119.0 [00:37<00:06, 5327.53it/s]     85%|████████▍ | 197958/234119.0 [00:37<00:06, 5350.29it/s]     85%|████████▍ | 198494/234119.0 [00:37<00:06, 5270.61it/s]     85%|████████▌ | 199022/234119.0 [00:37<00:06, 5222.11it/s]     85%|████████▌ | 199559/234119.0 [00:37<00:06, 5262.95it/s]     85%|████████▌ | 200096/234119.0 [00:37<00:06, 5292.42it/s]     86%|████████▌ | 200629/234119.0 [00:37<00:06, 5303.07it/s]     86%|████████▌ | 201175/234119.0 [00:38<00:06, 5348.30it/s]     86%|████████▌ | 201710/234119.0 [00:38<00:06, 5345.30it/s]     86%|████████▋ | 202245/234119.0 [00:38<00:06, 5300.56it/s]     87%|████████▋ | 202776/234119.0 [00:38<00:05, 5285.41it/s]     87%|████████▋ | 203325/234119.0 [00:38<00:05, 5343.90it/s]     87%|████████▋ | 203870/234119.0 [00:38<00:05, 5374.56it/s]     87%|████████▋ | 204408/234119.0 [00:38<00:05, 5285.43it/s]     88%|████████▊ | 204955/234119.0 [00:38<00:05, 5336.89it/s]     88%|████████▊ | 205490/234119.0 [00:38<00:05, 5295.80it/s]     88%|████████▊ | 206020/234119.0 [00:38<00:05, 5289.41it/s]     88%|████████▊ | 206564/234119.0 [00:39<00:05, 5333.68it/s]     88%|████████▊ | 207109/234119.0 [00:39<00:05, 5365.86it/s]     89%|████████▊ | 207649/234119.0 [00:39<00:04, 5374.60it/s]     89%|████████▉ | 208187/234119.0 [00:39<00:04, 5348.62it/s]     89%|████████▉ | 208722/234119.0 [00:39<00:04, 5296.57it/s]     89%|████████▉ | 209252/234119.0 [00:39<00:04, 5291.19it/s]     90%|████████▉ | 209799/234119.0 [00:39<00:04, 5343.92it/s]     90%|████████▉ | 210341/234119.0 [00:39<00:04, 5364.89it/s]     90%|█████████ | 210881/234119.0 [00:39<00:04, 5374.92it/s]     90%|█████████ | 211419/234119.0 [00:40<00:06, 3373.00it/s]     91%|█████████ | 211926/234119.0 [00:40<00:05, 3730.79it/s]     91%|█████████ | 212461/234119.0 [00:40<00:05, 4104.33it/s]     91%|█████████ | 213007/234119.0 [00:40<00:04, 4439.20it/s]     91%|█████████ | 213554/234119.0 [00:40<00:04, 4705.80it/s]     91%|█████████▏| 214066/234119.0 [00:40<00:04, 4806.51it/s]     92%|█████████▏| 214607/234119.0 [00:40<00:03, 4974.92it/s]     92%|█████████▏| 215127/234119.0 [00:40<00:03, 5016.20it/s]     92%|█████████▏| 215675/234119.0 [00:40<00:03, 5148.35it/s]     92%|█████████▏| 216221/234119.0 [00:41<00:03, 5237.74it/s]     93%|█████████▎| 216754/234119.0 [00:41<00:03, 5264.36it/s]     93%|█████████▎| 217300/234119.0 [00:41<00:03, 5319.28it/s]     93%|█████████▎| 217837/234119.0 [00:41<00:03, 5275.42it/s]     93%|█████████▎| 218388/234119.0 [00:41<00:02, 5343.18it/s]     94%|█████████▎| 218925/234119.0 [00:41<00:02, 5339.98it/s]     94%|█████████▎| 219461/234119.0 [00:41<00:02, 5336.88it/s]     94%|█████████▍| 220004/234119.0 [00:41<00:02, 5362.96it/s]     94%|█████████▍| 220542/234119.0 [00:41<00:02, 5301.30it/s]     94%|█████████▍| 221087/234119.0 [00:41<00:02, 5343.11it/s]     95%|█████████▍| 221627/234119.0 [00:42<00:02, 5359.38it/s]     95%|█████████▍| 222164/234119.0 [00:42<00:02, 5326.35it/s]     95%|█████████▌| 222700/234119.0 [00:42<00:02, 5335.51it/s]     95%|█████████▌| 223234/234119.0 [00:42<00:02, 5309.44it/s]     96%|█████████▌| 223766/234119.0 [00:42<00:01, 5301.43it/s]     96%|█████████▌| 224297/234119.0 [00:42<00:01, 5301.97it/s]     96%|█████████▌| 224834/234119.0 [00:42<00:01, 5320.39it/s]     96%|█████████▋| 225367/234119.0 [00:42<00:01, 5269.92it/s]     96%|█████████▋| 225898/234119.0 [00:42<00:01, 5277.16it/s]     97%|█████████▋| 226426/234119.0 [00:42<00:01, 5253.97it/s]     97%|█████████▋| 226961/234119.0 [00:43<00:01, 5279.48it/s]     97%|█████████▋| 227490/234119.0 [00:43<00:01, 5255.82it/s]     97%|█████████▋| 228016/234119.0 [00:43<00:01, 5218.96it/s]     98%|█████████▊| 228541/234119.0 [00:43<00:01, 5227.42it/s]     98%|█████████▊| 229064/234119.0 [00:43<00:00, 5182.60it/s]     98%|█████████▊| 229583/234119.0 [00:43<00:00, 5124.82it/s]     98%|█████████▊| 230096/234119.0 [00:43<00:00, 5060.34it/s]     99%|█████████▊| 230629/234119.0 [00:43<00:00, 5137.75it/s]     99%|█████████▊| 231144/234119.0 [00:43<00:00, 5131.76it/s]     99%|█████████▉| 231658/234119.0 [00:43<00:00, 5128.12it/s]     99%|█████████▉| 232178/234119.0 [00:44<00:00, 5148.88it/s]     99%|█████████▉| 232694/234119.0 [00:44<00:00, 5149.13it/s]    100%|█████████▉| 233221/234119.0 [00:44<00:00, 5184.06it/s]    100%|█████████▉| 233749/234119.0 [00:44<00:00, 5211.91it/s]    100%|██████████| 234119/234119.0 [00:44<00:00, 5257.98it/s]
    Downloading https://templateflow.s3.amazonaws.com/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_T1w.nii.gz
      0%|          | 0.00/13.7M [00:00<?, ?B/s]      0%|          | 52.2k/13.7M [00:00<00:35, 385kB/s]      2%|▏         | 272k/13.7M [00:00<00:12, 1.07MB/s]      8%|▊         | 1.16M/13.7M [00:00<00:03, 3.50MB/s]     35%|███▍      | 4.77M/13.7M [00:00<00:00, 12.3MB/s]     66%|██████▌   | 9.06M/13.7M [00:00<00:00, 18.9MB/s]    100%|█████████▉| 13.6M/13.7M [00:00<00:00, 23.5MB/s]    100%|██████████| 13.7M/13.7M [00:00<00:00, 16.3MB/s]
    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
      0%|          | 0/2 [00:00<?, ?it/s]     50%|█████     | 1/2 [00:00<00:00,  4.33it/s]    100%|██████████| 2/2 [00:00<00:00,  3.93it/s]    100%|██████████| 2/2 [00:00<00:00,  3.98it/s]
      0%|          | 0/2 [00:00<?, ?it/s]     50%|█████     | 1/2 [00:00<00:00,  3.17it/s]    100%|██████████| 2/2 [00:00<00:00,  3.20it/s]    100%|██████████| 2/2 [00:00<00:00,  3.19it/s]




.. GENERATED FROM PYTHON SOURCE LINES 103-109

Interactive bundle visualization
--------------------------------
Another way to examine the outputs is to export the individual bundle
figures, which show the streamlines, as well as the ROIs used to define the
bundle. This is an html file, which contains an interactive figure that can
be navigated, zoomed, rotated, etc.

.. GENERATED FROM PYTHON SOURCE LINES 109-113

.. code-block:: Python


    bundle_html = my_afq.export("indiv_bundles_figures")
    plotly.io.show(bundle_html["NDARAA948VFH"]["AR_L"])




.. raw:: html
    :file: images/sphx_glr_plot_accoustic_radiations_001.html





.. GENERATED FROM PYTHON SOURCE LINES 114-127

References
----------
.. [1] Alexander LM, Escalera J, Ai L, et al. An open resource for
    transdiagnostic research in pediatric mental health and learning
    disorders. Sci Data. 2017;4:170181.

.. [2] Richie-Halford A, Cieslak M, Ai L, et al. An analysis-ready and quality
    controlled resource for pediatric brain white-matter research. Scientific
    Data. 2022;9(1):1-27.

.. [3] Cieslak M, Cook PA, He X, et al. QSIPrep: an integrative platform for
    preprocessing and reconstructing diffusion MRI data. Nat Methods.
    2021;18(7):775-778.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (28 minutes 12.034 seconds)

**Estimated memory usage:**  5362 MB


.. _sphx_glr_download_howto_howto_examples_plot_accoustic_radiations.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_accoustic_radiations.ipynb <plot_accoustic_radiations.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_accoustic_radiations.py <plot_accoustic_radiations.py>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
