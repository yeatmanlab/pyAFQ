
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "howto/howto_examples/plot_accoustic_radiations.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_howto_howto_examples_plot_accoustic_radiations.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_howto_howto_examples_plot_accoustic_radiations.py:


===============================================================
How to add new bundles into pyAFQ(Accoustic Radiations Example)
===============================================================

pyAFQ is designed to be customizable and extensible. This example shows how you
can customize it to define a new bundle based on a definition of waypoint and
endpoint ROIs of your design. In this case, we add the accoustic radiations.

We start by importing some of the components that we need for this example and
fixing the random seed for reproducibility

.. GENERATED FROM PYTHON SOURCE LINES 14-26

.. code-block:: Python


    import os.path as op
    import plotly
    import numpy as np

    from AFQ.api.group import GroupAFQ
    import AFQ.api.bundle_dict as abd
    import AFQ.data.fetch as afd
    from AFQ.definitions.image import ImageFile, RoiImage
    np.random.seed(1234)









.. GENERATED FROM PYTHON SOURCE LINES 27-34

Get dMRI data
---------------
We will analyze one subject from the Healthy Brain Network Processed Open
Diffusion Derivatives dataset (HBN-POD2) [1]_, [2]_. We'll use a fetcher to
get preprocessed dMRI data for one of the >2,000 subjects in that study. The
data gets organized into a BIDS-compatible format in the `~/AFQ_data/HBN`
folder:

.. GENERATED FROM PYTHON SOURCE LINES 34-37

.. code-block:: Python


    study_dir = afd.fetch_hbn_preproc(["NDARAA948VFH"])[1]





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

      0%|          | 0/36 [00:00<?, ?it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_desc-brain_mask.nii.gz:   0%|          | 0/36 [00:00<?, ?it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_desc-brain_mask.nii.gz:   3%|▎         | 1/36 [00:00<00:08,  4.07it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_desc-preproc_T1w.nii.gz:   3%|▎         | 1/36 [00:00<00:08,  4.07it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_desc-preproc_T1w.nii.gz:   6%|▌         | 2/36 [00:01<00:33,  1.01it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_dseg.nii.gz:   6%|▌         | 2/36 [00:01<00:33,  1.01it/s]                Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_dseg.nii.gz:   8%|▊         | 3/36 [00:01<00:19,  1.67it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_from-MNI152NLin2009cAsym_to-T1w_mode-image_xfm.h5:   8%|▊         | 3/36 [00:01<00:19,  1.67it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_from-MNI152NLin2009cAsym_to-T1w_mode-image_xfm.h5:  11%|█         | 4/36 [00:03<00:29,  1.07it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_from-T1w_to-MNI152NLin2009cAsym_mode-image_xfm.h5:  11%|█         | 4/36 [00:03<00:29,  1.07it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_from-T1w_to-MNI152NLin2009cAsym_mode-image_xfm.h5:  14%|█▍        | 5/36 [00:03<00:23,  1.30it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-CSF_probseg.nii.gz:  14%|█▍        | 5/36 [00:03<00:23,  1.30it/s]                             Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-CSF_probseg.nii.gz:  17%|█▋        | 6/36 [00:04<00:17,  1.75it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-GM_probseg.nii.gz:  17%|█▋        | 6/36 [00:04<00:17,  1.75it/s]     Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-GM_probseg.nii.gz:  19%|█▉        | 7/36 [00:04<00:13,  2.15it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-WM_probseg.nii.gz:  19%|█▉        | 7/36 [00:04<00:13,  2.15it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_label-WM_probseg.nii.gz:  22%|██▏       | 8/36 [00:04<00:10,  2.58it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_desc-brain_mask.nii.gz:  22%|██▏       | 8/36 [00:04<00:10,  2.58it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_desc-brain_mask.nii.gz:  25%|██▌       | 9/36 [00:04<00:08,  3.25it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_desc-preproc_T1w.nii.gz:  25%|██▌       | 9/36 [00:04<00:08,  3.25it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_desc-preproc_T1w.nii.gz:  28%|██▊       | 10/36 [00:04<00:07,  3.38it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_dseg.nii.gz:  28%|██▊       | 10/36 [00:04<00:07,  3.38it/s]                Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_dseg.nii.gz:  31%|███       | 11/36 [00:05<00:06,  3.91it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-CSF_probseg.nii.gz:  31%|███       | 11/36 [00:05<00:06,  3.91it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-CSF_probseg.nii.gz:  33%|███▎      | 12/36 [00:05<00:06,  3.97it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-GM_probseg.nii.gz:  33%|███▎      | 12/36 [00:05<00:06,  3.97it/s]     Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-GM_probseg.nii.gz:  36%|███▌      | 13/36 [00:05<00:05,  4.00it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-WM_probseg.nii.gz:  36%|███▌      | 13/36 [00:05<00:05,  4.00it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/anat/sub-NDARAA948VFH_space-MNI152NLin2009cAsym_label-WM_probseg.nii.gz:  39%|███▉      | 14/36 [00:05<00:05,  4.01it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_seg_brainmask.svg:  39%|███▉      | 14/36 [00:05<00:05,  4.01it/s]                                 Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_seg_brainmask.svg:  42%|████▏     | 15/36 [00:06<00:05,  3.99it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_carpetplot.svg:  42%|████▏     | 15/36 [00:06<00:05,  3.99it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_carpetplot.svg:  44%|████▍     | 16/36 [00:06<00:04,  4.67it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_coreg.svg:  44%|████▍     | 16/36 [00:06<00:04,  4.67it/s]         Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_coreg.svg:  47%|████▋     | 17/36 [00:06<00:03,  5.21it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-resampled_b0ref.svg:  47%|████▋     | 17/36 [00:06<00:03,  5.21it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-resampled_b0ref.svg:  50%|█████     | 18/36 [00:06<00:03,  5.66it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-sdc_b0.svg:  50%|█████     | 18/36 [00:06<00:03,  5.66it/s]             Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-sdc_b0.svg:  53%|█████▎    | 19/36 [00:06<00:02,  6.00it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_biascorr.svg:  53%|█████▎    | 19/36 [00:06<00:02,  6.00it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_biascorr.svg:  56%|█████▌    | 20/36 [00:06<00:02,  5.76it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_denoising.svg:  56%|█████▌    | 20/36 [00:06<00:02,  5.76it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_denoising.svg:  58%|█████▊    | 21/36 [00:07<00:02,  5.07it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_unringing.svg:  58%|█████▊    | 21/36 [00:07<00:02,  5.07it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwi_denoise_ses_HBNsiteRU_acq_64dir_dwi_wf_unringing.svg:  61%|██████    | 22/36 [00:07<00:02,  5.47it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_sampling_scheme.gif:  61%|██████    | 22/36 [00:07<00:02,  5.47it/s]                                         Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_sampling_scheme.gif:  64%|██████▍   | 23/36 [00:07<00:02,  5.28it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_t1_2_mni.svg:  64%|██████▍   | 23/36 [00:07<00:02,  5.28it/s]                                   Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/figures/sub-NDARAA948VFH_t1_2_mni.svg:  67%|██████▋   | 24/36 [00:07<00:02,  5.65it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/anat/sub-NDARAA948VFH_ses-HBNsiteRU_acq-HCP_from-orig_to-T1w_mode-image_xfm.txt:  67%|██████▋   | 24/36 [00:07<00:02,  5.65it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/anat/sub-NDARAA948VFH_ses-HBNsiteRU_acq-HCP_from-orig_to-T1w_mode-image_xfm.txt:  69%|██████▉   | 25/36 [00:07<00:01,  6.15it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_confounds.tsv:  69%|██████▉   | 25/36 [00:07<00:01,  6.15it/s]                         Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_confounds.tsv:  72%|███████▏  | 26/36 [00:07<00:01,  6.56it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-ImageQC_dwi.csv:  72%|███████▏  | 26/36 [00:07<00:01,  6.56it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-ImageQC_dwi.csv:  75%|███████▌  | 27/36 [00:07<00:01,  6.68it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-SliceQC_dwi.json:  75%|███████▌  | 27/36 [00:07<00:01,  6.68it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_desc-SliceQC_dwi.json:  78%|███████▊  | 28/36 [00:08<00:01,  6.80it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwiqc.json:  78%|███████▊  | 28/36 [00:08<00:01,  6.80it/s]               Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_dwiqc.json:  81%|████████  | 29/36 [00:08<00:01,  5.70it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-brain_mask.nii.gz:  81%|████████  | 29/36 [00:08<00:01,  5.70it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-brain_mask.nii.gz:  83%|████████▎ | 30/36 [00:08<00:00,  6.20it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-eddy_cnr.nii.gz:  83%|████████▎ | 30/36 [00:08<00:00,  6.20it/s]      Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-eddy_cnr.nii.gz:  86%|████████▌ | 31/36 [00:08<00:00,  6.60it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.b:  86%|████████▌ | 31/36 [00:08<00:00,  6.60it/s]      Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.b:  89%|████████▉ | 32/36 [00:08<00:00,  6.92it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.bval:  89%|████████▉ | 32/36 [00:08<00:00,  6.92it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.bval:  92%|█████████▏| 33/36 [00:08<00:00,  7.14it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.bvec:  92%|█████████▏| 33/36 [00:08<00:00,  7.14it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.bvec:  94%|█████████▍| 34/36 [00:08<00:00,  7.10it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.nii.gz:  94%|█████████▍| 34/36 [00:08<00:00,  7.10it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_desc-preproc_dwi.nii.gz:  97%|█████████▋| 35/36 [00:10<00:00,  2.07it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_dwiref.nii.gz:  97%|█████████▋| 35/36 [00:10<00:00,  2.07it/s]              Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_dwiref.nii.gz: 100%|██████████| 36/36 [00:10<00:00,  2.59it/s]    Downloading /home/runner/AFQ_data/HBN/derivatives/qsiprep/sub-NDARAA948VFH/ses-HBNsiteRU/dwi/sub-NDARAA948VFH_ses-HBNsiteRU_acq-64dir_space-T1w_dwiref.nii.gz: 100%|██████████| 36/36 [00:10<00:00,  3.46it/s]




.. GENERATED FROM PYTHON SOURCE LINES 38-48

Define custom `BundleDict` object
--------------------------------
The `BundleDict` object holds information about "include" and "exclude" ROIs,
as well as endpoint ROIS, and whether the bundle crosses the midline. In this
case, the ROIs are all defined in the MNI template space that is used as the
default template space in pyAFQ, but, in principle, other template spaces
could be used.

The ROIs for the case can be downloaded using a custom fetcher which saves
the ROIs to a folder and creates a dictionary of paths to the ROIs:

.. GENERATED FROM PYTHON SOURCE LINES 48-65

.. code-block:: Python


    ar_rois = afd.read_ar_templates()

    bundles = abd.BundleDict({
        "AR_L": {
            "start": ar_rois["AAL_Thal_L"],
            "end": ar_rois["AAL_TempSup_L"],
            "cross_midline": False,
        },
        "AR_R": {
            "start": ar_rois["AAL_Thal_R"],
            "end": ar_rois["AAL_TempSup_R"],
            "cross_midline": False
        }
    })






.. rst-class:: sphx-glr-script-out

 .. code-block:: none

      0%|          | 0/16 [00:00<?, ? MB/s]      6%|▋         | 1/16 [00:00<00:02,  7.11 MB/s]     25%|██▌       | 4/16 [00:00<00:00, 15.39 MB/s]     44%|████▍     | 7/16 [00:00<00:00, 18.96 MB/s]    100%|██████████| 16/16 [00:00<00:00, 37.57 MB/s]
      0%|          | 0/16 [00:00<?, ? MB/s]     12%|█▎        | 2/16 [00:00<00:01, 13.87 MB/s]     25%|██▌       | 4/16 [00:00<00:00, 13.84 MB/s]     44%|████▍     | 7/16 [00:00<00:00, 16.99 MB/s]     88%|████████▊ | 14/16 [00:00<00:00, 29.38 MB/s]    100%|██████████| 16/16 [00:00<00:00, 27.63 MB/s]
      0%|          | 0/16 [00:00<?, ? MB/s]      6%|▋         | 1/16 [00:00<00:02,  6.89 MB/s]     25%|██▌       | 4/16 [00:00<00:00, 14.97 MB/s]     50%|█████     | 8/16 [00:00<00:00, 20.67 MB/s]    100%|██████████| 16/16 [00:00<00:00, 36.57 MB/s]
      0%|          | 0/16 [00:00<?, ? MB/s]     12%|█▎        | 2/16 [00:00<00:01, 13.73 MB/s]     25%|██▌       | 4/16 [00:00<00:00, 13.69 MB/s]     50%|█████     | 8/16 [00:00<00:00, 19.92 MB/s]    100%|██████████| 16/16 [00:00<00:00, 36.40 MB/s]
    Downloading https://templateflow.s3.amazonaws.com/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_T2w.nii.gz
      0%|          | 0.00/13.3M [00:00<?, ?B/s]      0%|          | 52.2k/13.3M [00:00<00:26, 508kB/s]      1%|▏         | 191k/13.3M [00:00<00:13, 994kB/s]       6%|▌         | 801k/13.3M [00:00<00:03, 3.22MB/s]     25%|██▍       | 3.27M/13.3M [00:00<00:00, 11.3MB/s]     57%|█████▋    | 7.51M/13.3M [00:00<00:00, 22.0MB/s]     89%|████████▊ | 11.8M/13.3M [00:00<00:00, 28.5MB/s]    100%|██████████| 13.3M/13.3M [00:00<00:00, 20.8MB/s]
    Downloading https://templateflow.s3.amazonaws.com/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_desc-brain_mask.nii.gz
      0%|          | 0.00/160k [00:00<?, ?B/s]     27%|██▋       | 43.0k/160k [00:00<00:00, 418kB/s]    100%|██████████| 160k/160k [00:00<00:00, 1.03MB/s]




.. GENERATED FROM PYTHON SOURCE LINES 66-81

Define GroupAFQ object
----------------------
HBN POD2 have been processed with qsiprep [3]_. This means that a brain mask
has already been computer for them. As you can see in other examples, these
data also have a mapping calculated for them, which can also be incorporated
into processing. However, in this case, we will let pyAFQ calculate its own
SyN-based mapping so that the `combine_bundle` method can be used below to
create a montage visualization.

For tractography, we use CSD-based probabilistic tractography seeding
extensively (`n_seeds=4` means 81 seeds per voxel!), but only within the ROIs
and not throughout the white matter. This is controlled by passing
`"seed_mask": RoiImage()` in the `tracking_params` dict. The custom bundles
are passed as `bundle_info=bundles`. The call to `my_afq.export_all()`
initiates the pipeline.

.. GENERATED FROM PYTHON SOURCE LINES 81-102

.. code-block:: Python


    brain_mask_definition = ImageFile(
        suffix="mask",
        filters={'desc': 'brain',
                 'space': 'T1w',
                 'scope': 'qsiprep'})

    my_afq = GroupAFQ(
        bids_path=study_dir,
        preproc_pipeline="qsiprep",
        participant_labels=["NDARAA948VFH"],
        output_dir=op.join(study_dir, "derivatives", "afq_ar"),
        brain_mask_definition=brain_mask_definition,
        tracking_params={"n_seeds": 4,
                         "directions": "prob",
                         "odf_model": "CSD",
                         "seed_mask": RoiImage(use_endpoints=True)},
        bundle_info=bundles)

    my_afq.export_all()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

      0%|          | 0/234119.0 [00:00<?, ?it/s]      0%|          | 185/234119.0 [00:00<02:06, 1848.04it/s]      0%|          | 679/234119.0 [00:00<01:03, 3661.75it/s]      1%|          | 1185/234119.0 [00:00<00:54, 4296.58it/s]      1%|          | 1705/234119.0 [00:00<00:49, 4652.52it/s]      1%|          | 2217/234119.0 [00:00<00:48, 4820.54it/s]      1%|          | 2728/234119.0 [00:00<00:47, 4917.41it/s]      1%|▏         | 3247/234119.0 [00:00<00:46, 5004.08it/s]      2%|▏         | 3768/234119.0 [00:00<00:45, 5067.83it/s]      2%|▏         | 4283/234119.0 [00:00<00:45, 5091.40it/s]      2%|▏         | 4793/234119.0 [00:01<00:45, 5046.20it/s]      2%|▏         | 5319/234119.0 [00:01<00:44, 5110.31it/s]      2%|▏         | 5831/234119.0 [00:01<00:44, 5090.06it/s]      3%|▎         | 6341/234119.0 [00:01<00:44, 5083.29it/s]      3%|▎         | 6852/234119.0 [00:01<00:44, 5089.70it/s]      3%|▎         | 7380/234119.0 [00:01<00:44, 5146.48it/s]      3%|▎         | 7895/234119.0 [00:01<00:43, 5144.77it/s]      4%|▎         | 8418/234119.0 [00:01<00:43, 5169.06it/s]      4%|▍         | 8948/234119.0 [00:01<00:43, 5207.32it/s]      4%|▍         | 9469/234119.0 [00:01<00:43, 5163.46it/s]      4%|▍         | 9986/234119.0 [00:02<00:43, 5134.93it/s]      4%|▍         | 10520/234119.0 [00:02<00:43, 5194.18it/s]      5%|▍         | 11041/234119.0 [00:02<00:42, 5197.03it/s]      5%|▍         | 11565/234119.0 [00:02<00:42, 5207.92it/s]      5%|▌         | 12087/234119.0 [00:02<00:42, 5209.33it/s]      5%|▌         | 12608/234119.0 [00:02<00:42, 5187.11it/s]      6%|▌         | 13141/234119.0 [00:02<00:42, 5228.57it/s]      6%|▌         | 13664/234119.0 [00:02<00:42, 5212.31it/s]      6%|▌         | 14195/234119.0 [00:02<00:41, 5238.43it/s]      6%|▋         | 14719/234119.0 [00:02<00:42, 5165.31it/s]      7%|▋         | 15241/234119.0 [00:03<00:42, 5181.27it/s]      7%|▋         | 15769/234119.0 [00:03<00:41, 5210.54it/s]      7%|▋         | 16291/234119.0 [00:03<00:43, 5046.57it/s]      7%|▋         | 16814/234119.0 [00:03<00:42, 5099.06it/s]      7%|▋         | 17345/234119.0 [00:03<00:42, 5159.29it/s]      8%|▊         | 17873/234119.0 [00:03<00:41, 5194.44it/s]      8%|▊         | 18401/234119.0 [00:03<00:41, 5218.75it/s]      8%|▊         | 18929/234119.0 [00:03<00:41, 5235.51it/s]      8%|▊         | 19453/234119.0 [00:03<00:41, 5225.84it/s]      9%|▊         | 19976/234119.0 [00:03<00:41, 5192.69it/s]      9%|▉         | 20496/234119.0 [00:04<00:41, 5175.75it/s]      9%|▉         | 21035/234119.0 [00:04<00:40, 5237.56it/s]      9%|▉         | 21560/234119.0 [00:04<00:40, 5239.05it/s]      9%|▉         | 22092/234119.0 [00:04<00:40, 5262.36it/s]     10%|▉         | 22620/234119.0 [00:04<00:40, 5266.60it/s]     10%|▉         | 23147/234119.0 [00:04<00:40, 5265.64it/s]     10%|█         | 23674/234119.0 [00:04<00:40, 5228.16it/s]     10%|█         | 24209/234119.0 [00:04<00:39, 5262.82it/s]     11%|█         | 24750/234119.0 [00:04<00:39, 5302.89it/s]     11%|█         | 25281/234119.0 [00:04<00:39, 5277.12it/s]     11%|█         | 25813/234119.0 [00:05<00:39, 5287.56it/s]     11%|█▏        | 26343/234119.0 [00:05<00:39, 5289.85it/s]     11%|█▏        | 26873/234119.0 [00:05<00:39, 5247.49it/s]     12%|█▏        | 27408/234119.0 [00:05<00:39, 5276.85it/s]     12%|█▏        | 27945/234119.0 [00:05<00:38, 5302.91it/s]     12%|█▏        | 28484/234119.0 [00:05<00:38, 5327.76it/s]     12%|█▏        | 29017/234119.0 [00:05<00:38, 5320.98it/s]     13%|█▎        | 29555/234119.0 [00:05<00:38, 5336.46it/s]     13%|█▎        | 30089/234119.0 [00:05<00:38, 5310.26it/s]     13%|█▎        | 30621/234119.0 [00:05<00:38, 5254.63it/s]     13%|█▎        | 31149/234119.0 [00:06<00:38, 5261.91it/s]     14%|█▎        | 31689/234119.0 [00:06<00:38, 5299.83it/s]     14%|█▍        | 32220/234119.0 [00:06<00:38, 5270.71it/s]     14%|█▍        | 32748/234119.0 [00:06<00:38, 5190.34it/s]     14%|█▍        | 33268/234119.0 [00:06<00:38, 5190.68it/s]     14%|█▍        | 33788/234119.0 [00:06<01:05, 3036.35it/s]     15%|█▍        | 34314/234119.0 [00:06<00:57, 3477.00it/s]     15%|█▍        | 34848/234119.0 [00:06<00:51, 3887.83it/s]     15%|█▌        | 35400/234119.0 [00:07<00:46, 4278.53it/s]     15%|█▌        | 35923/234119.0 [00:07<00:43, 4520.64it/s]     16%|█▌        | 36462/234119.0 [00:07<00:41, 4750.43it/s]     16%|█▌        | 37003/234119.0 [00:07<00:39, 4931.91it/s]     16%|█▌        | 37525/234119.0 [00:07<00:39, 4968.61it/s]     16%|█▋        | 38052/234119.0 [00:07<00:38, 5052.64it/s]     16%|█▋        | 38592/234119.0 [00:07<00:37, 5151.90it/s]     17%|█▋        | 39131/234119.0 [00:07<00:37, 5221.40it/s]     17%|█▋        | 39661/234119.0 [00:07<00:37, 5218.19it/s]     17%|█▋        | 40198/234119.0 [00:08<00:36, 5262.46it/s]     17%|█▋        | 40733/234119.0 [00:08<00:36, 5285.19it/s]     18%|█▊        | 41265/234119.0 [00:08<00:36, 5255.12it/s]     18%|█▊        | 41793/234119.0 [00:08<00:36, 5255.20it/s]     18%|█▊        | 42328/234119.0 [00:08<00:36, 5282.15it/s]     18%|█▊        | 42874/234119.0 [00:08<00:35, 5333.07it/s]     19%|█▊        | 43408/234119.0 [00:08<00:36, 5273.40it/s]     19%|█▉        | 43950/234119.0 [00:08<00:35, 5314.87it/s]     19%|█▉        | 44494/234119.0 [00:08<00:35, 5347.31it/s]     19%|█▉        | 45030/234119.0 [00:08<00:35, 5286.97it/s]     19%|█▉        | 45560/234119.0 [00:09<00:35, 5270.42it/s]     20%|█▉        | 46090/234119.0 [00:09<00:35, 5274.45it/s]     20%|█▉        | 46618/234119.0 [00:09<00:35, 5235.12it/s]     20%|██        | 47151/234119.0 [00:09<00:35, 5263.15it/s]     20%|██        | 47698/234119.0 [00:09<00:35, 5323.42it/s]     21%|██        | 48231/234119.0 [00:09<00:34, 5321.96it/s]     21%|██        | 48766/234119.0 [00:09<00:34, 5329.47it/s]     21%|██        | 49300/234119.0 [00:09<00:34, 5297.57it/s]     21%|██▏       | 49835/234119.0 [00:09<00:34, 5312.05it/s]     22%|██▏       | 50367/234119.0 [00:09<00:34, 5297.35it/s]     22%|██▏       | 50902/234119.0 [00:10<00:34, 5310.84it/s]     22%|██▏       | 51450/234119.0 [00:10<00:34, 5359.95it/s]     22%|██▏       | 52018/234119.0 [00:10<00:33, 5454.64it/s]     22%|██▏       | 52564/234119.0 [00:10<00:33, 5452.52it/s]     23%|██▎       | 53110/234119.0 [00:10<00:33, 5416.74it/s]     23%|██▎       | 53652/234119.0 [00:10<00:33, 5377.14it/s]     23%|██▎       | 54190/234119.0 [00:10<00:33, 5368.15it/s]     23%|██▎       | 54737/234119.0 [00:10<00:33, 5396.49it/s]     24%|██▎       | 55281/234119.0 [00:10<00:33, 5405.82it/s]     24%|██▍       | 55835/234119.0 [00:10<00:32, 5443.59it/s]     24%|██▍       | 56380/234119.0 [00:11<00:32, 5431.61it/s]     24%|██▍       | 56924/234119.0 [00:11<00:32, 5425.82it/s]     25%|██▍       | 57467/234119.0 [00:11<00:33, 5312.66it/s]     25%|██▍       | 57999/234119.0 [00:11<00:33, 5293.04it/s]     25%|██▌       | 58536/234119.0 [00:11<00:33, 5315.43it/s]     25%|██▌       | 59089/234119.0 [00:11<00:32, 5376.59it/s]     25%|██▌       | 59627/234119.0 [00:11<00:32, 5314.82it/s]     26%|██▌       | 60159/234119.0 [00:11<00:33, 5208.04it/s]     26%|██▌       | 60708/234119.0 [00:11<00:32, 5289.50it/s]     26%|██▌       | 61238/234119.0 [00:11<00:32, 5287.97it/s]     26%|██▋       | 61768/234119.0 [00:12<00:32, 5226.34it/s]     27%|██▋       | 62292/234119.0 [00:12<00:32, 5228.36it/s]     27%|██▋       | 62842/234119.0 [00:12<00:32, 5307.63it/s]     27%|██▋       | 63392/234119.0 [00:12<00:31, 5363.62it/s]     27%|██▋       | 63934/234119.0 [00:12<00:31, 5376.47it/s]     28%|██▊       | 64486/234119.0 [00:12<00:31, 5417.53it/s]     28%|██▊       | 65040/234119.0 [00:12<00:31, 5452.16it/s]     28%|██▊       | 65586/234119.0 [00:12<00:31, 5417.99it/s]     28%|██▊       | 66128/234119.0 [00:12<00:31, 5342.69it/s]     28%|██▊       | 66663/234119.0 [00:12<00:31, 5338.26it/s]     29%|██▊       | 67220/234119.0 [00:13<00:30, 5404.58it/s]     29%|██▉       | 67771/234119.0 [00:13<00:30, 5435.25it/s]     29%|██▉       | 68315/234119.0 [00:13<00:30, 5391.00it/s]     29%|██▉       | 68865/234119.0 [00:13<00:30, 5422.14it/s]     30%|██▉       | 69421/234119.0 [00:13<00:30, 5459.72it/s]     30%|██▉       | 69968/234119.0 [00:13<00:30, 5424.13it/s]     30%|███       | 70511/234119.0 [00:13<00:30, 5389.34it/s]     30%|███       | 71051/234119.0 [00:13<00:30, 5384.03it/s]     31%|███       | 71595/234119.0 [00:13<00:30, 5399.38it/s]     31%|███       | 72140/234119.0 [00:13<00:29, 5412.78it/s]     31%|███       | 72686/234119.0 [00:14<00:29, 5422.64it/s]     31%|███▏      | 73245/234119.0 [00:14<00:29, 5468.43it/s]     32%|███▏      | 73814/234119.0 [00:14<00:28, 5533.92it/s]     32%|███▏      | 74368/234119.0 [00:14<00:29, 5475.70it/s]     32%|███▏      | 74916/234119.0 [00:14<00:29, 5405.18it/s]     32%|███▏      | 75457/234119.0 [00:14<00:29, 5404.98it/s]     32%|███▏      | 76002/234119.0 [00:14<00:29, 5417.61it/s]     33%|███▎      | 76547/234119.0 [00:14<00:29, 5423.32it/s]     33%|███▎      | 77100/234119.0 [00:14<00:28, 5454.85it/s]     33%|███▎      | 77647/234119.0 [00:14<00:28, 5458.39it/s]     33%|███▎      | 78206/234119.0 [00:15<00:28, 5493.01it/s]     34%|███▎      | 78756/234119.0 [00:15<00:28, 5441.61it/s]     34%|███▍      | 79301/234119.0 [00:15<00:28, 5404.22it/s]     34%|███▍      | 79842/234119.0 [00:15<00:28, 5404.02it/s]     34%|███▍      | 80383/234119.0 [00:15<00:28, 5386.63it/s]     35%|███▍      | 80931/234119.0 [00:15<00:28, 5413.85it/s]     35%|███▍      | 81478/234119.0 [00:15<00:28, 5429.38it/s]     35%|███▌      | 82026/234119.0 [00:15<00:27, 5443.01it/s]     35%|███▌      | 82582/234119.0 [00:15<00:27, 5477.58it/s]     36%|███▌      | 83130/234119.0 [00:15<00:27, 5431.50it/s]     36%|███▌      | 83674/234119.0 [00:16<00:27, 5386.44it/s]     36%|███▌      | 84219/234119.0 [00:16<00:27, 5403.46it/s]     36%|███▌      | 84760/234119.0 [00:16<00:27, 5390.97it/s]     36%|███▋      | 85300/234119.0 [00:16<00:27, 5388.29it/s]     37%|███▋      | 85862/234119.0 [00:16<00:27, 5455.65it/s]     37%|███▋      | 86416/234119.0 [00:16<00:26, 5480.21it/s]     37%|███▋      | 86965/234119.0 [00:16<00:26, 5477.36it/s]     37%|███▋      | 87513/234119.0 [00:16<00:26, 5445.16it/s]     38%|███▊      | 88058/234119.0 [00:16<00:27, 5381.75it/s]     38%|███▊      | 88597/234119.0 [00:17<00:27, 5351.18it/s]     38%|███▊      | 89133/234119.0 [00:17<00:27, 5259.17it/s]     38%|███▊      | 89662/234119.0 [00:17<00:27, 5264.16it/s]     39%|███▊      | 90207/234119.0 [00:17<00:27, 5318.61it/s]     39%|███▉      | 90763/234119.0 [00:17<00:26, 5388.15it/s]     39%|███▉      | 91305/234119.0 [00:17<00:26, 5396.93it/s]     39%|███▉      | 91847/234119.0 [00:17<00:26, 5400.39it/s]     39%|███▉      | 92388/234119.0 [00:17<00:26, 5388.97it/s]     40%|███▉      | 92927/234119.0 [00:17<00:26, 5339.89it/s]     40%|███▉      | 93462/234119.0 [00:17<00:26, 5308.38it/s]     40%|████      | 94004/234119.0 [00:18<00:26, 5340.25it/s]     40%|████      | 94539/234119.0 [00:18<00:26, 5325.44it/s]     41%|████      | 95084/234119.0 [00:18<00:25, 5361.52it/s]     41%|████      | 95621/234119.0 [00:18<00:25, 5346.52it/s]     41%|████      | 96165/234119.0 [00:18<00:25, 5372.74it/s]     41%|████▏     | 96703/234119.0 [00:18<00:25, 5331.95it/s]     42%|████▏     | 97237/234119.0 [00:18<00:25, 5299.58it/s]     42%|████▏     | 97774/234119.0 [00:18<00:25, 5319.43it/s]     42%|████▏     | 98311/234119.0 [00:18<00:25, 5333.43it/s]     42%|████▏     | 98852/234119.0 [00:18<00:25, 5351.73it/s]     42%|████▏     | 99406/234119.0 [00:19<00:24, 5406.86it/s]     43%|████▎     | 99947/234119.0 [00:19<00:25, 5324.67it/s]     43%|████▎     | 100487/234119.0 [00:19<00:25, 5344.70it/s]     43%|████▎     | 101022/234119.0 [00:19<00:25, 5296.29it/s]     43%|████▎     | 101563/234119.0 [00:19<00:24, 5327.83it/s]     44%|████▎     | 102109/234119.0 [00:19<00:24, 5363.82it/s]     44%|████▍     | 102650/234119.0 [00:19<00:24, 5376.30it/s]     44%|████▍     | 103188/234119.0 [00:19<00:24, 5368.87it/s]     44%|████▍     | 103732/234119.0 [00:19<00:24, 5385.60it/s]     45%|████▍     | 104282/234119.0 [00:19<00:23, 5417.92it/s]     45%|████▍     | 104832/234119.0 [00:20<00:23, 5441.84it/s]     45%|████▌     | 105377/234119.0 [00:20<00:23, 5380.94it/s]     45%|████▌     | 105923/234119.0 [00:20<00:23, 5400.14it/s]     45%|████▌     | 106474/234119.0 [00:20<00:23, 5432.40it/s]     46%|████▌     | 107031/234119.0 [00:20<00:23, 5471.24it/s]     46%|████▌     | 107590/234119.0 [00:20<00:22, 5506.53it/s]     46%|████▌     | 108141/234119.0 [00:20<00:22, 5486.08it/s]     46%|████▋     | 108690/234119.0 [00:20<00:22, 5485.18it/s]     47%|████▋     | 109239/234119.0 [00:20<00:22, 5461.77it/s]     47%|████▋     | 109786/234119.0 [00:20<00:22, 5448.38it/s]     47%|████▋     | 110350/234119.0 [00:21<00:22, 5505.22it/s]     47%|████▋     | 110901/234119.0 [00:21<00:22, 5449.10it/s]     48%|████▊     | 111452/234119.0 [00:21<00:22, 5463.94it/s]     48%|████▊     | 111999/234119.0 [00:21<00:22, 5465.56it/s]     48%|████▊     | 112558/234119.0 [00:21<00:22, 5499.10it/s]     48%|████▊     | 113108/234119.0 [00:21<00:22, 5460.35it/s]     49%|████▊     | 113655/234119.0 [00:21<00:22, 5399.91it/s]     49%|████▉     | 114196/234119.0 [00:21<00:35, 3420.21it/s]     49%|████▉     | 114737/234119.0 [00:22<00:31, 3839.92it/s]     49%|████▉     | 115247/234119.0 [00:22<00:28, 4130.75it/s]     49%|████▉     | 115803/234119.0 [00:22<00:26, 4485.34it/s]     50%|████▉     | 116347/234119.0 [00:22<00:24, 4734.22it/s]     50%|████▉     | 116907/234119.0 [00:22<00:23, 4967.50it/s]     50%|█████     | 117455/234119.0 [00:22<00:22, 5109.36it/s]     50%|█████     | 118009/234119.0 [00:22<00:22, 5231.88it/s]     51%|█████     | 118565/234119.0 [00:22<00:21, 5326.15it/s]     51%|█████     | 119110/234119.0 [00:22<00:21, 5325.63it/s]     51%|█████     | 119652/234119.0 [00:22<00:21, 5350.96it/s]     51%|█████▏    | 120196/234119.0 [00:23<00:21, 5373.71it/s]     52%|█████▏    | 120749/234119.0 [00:23<00:20, 5419.06it/s]     52%|█████▏    | 121310/234119.0 [00:23<00:20, 5473.05it/s]     52%|█████▏    | 121860/234119.0 [00:23<00:20, 5445.24it/s]     52%|█████▏    | 122407/234119.0 [00:23<00:20, 5404.09it/s]     53%|█████▎    | 122949/234119.0 [00:23<00:20, 5390.31it/s]     53%|█████▎    | 123489/234119.0 [00:23<00:20, 5355.41it/s]     53%|█████▎    | 124040/234119.0 [00:23<00:20, 5399.52it/s]     53%|█████▎    | 124590/234119.0 [00:23<00:20, 5426.65it/s]     53%|█████▎    | 125158/234119.0 [00:23<00:19, 5499.66it/s]     54%|█████▎    | 125718/234119.0 [00:24<00:19, 5527.62it/s]     54%|█████▍    | 126271/234119.0 [00:24<00:20, 5381.33it/s]     54%|█████▍    | 126811/234119.0 [00:24<00:19, 5385.65it/s]     54%|█████▍    | 127351/234119.0 [00:24<00:19, 5379.98it/s]     55%|█████▍    | 127904/234119.0 [00:24<00:19, 5422.52it/s]     55%|█████▍    | 128460/234119.0 [00:24<00:19, 5461.92it/s]     55%|█████▌    | 129007/234119.0 [00:24<00:19, 5439.25it/s]     55%|█████▌    | 129573/234119.0 [00:24<00:19, 5501.59it/s]     56%|█████▌    | 130124/234119.0 [00:24<00:18, 5503.93it/s]     56%|█████▌    | 130675/234119.0 [00:24<00:18, 5451.54it/s]     56%|█████▌    | 131221/234119.0 [00:25<00:19, 5404.58it/s]     56%|█████▋    | 131762/234119.0 [00:25<00:19, 5317.93it/s]     57%|█████▋    | 132295/234119.0 [00:25<00:19, 5309.52it/s]     57%|█████▋    | 132839/234119.0 [00:25<00:18, 5347.80it/s]     57%|█████▋    | 133390/234119.0 [00:25<00:18, 5395.10it/s]     57%|█████▋    | 133942/234119.0 [00:25<00:18, 5431.75it/s]     57%|█████▋    | 134507/234119.0 [00:25<00:18, 5495.69it/s]     58%|█████▊    | 135057/234119.0 [00:25<00:18, 5472.34it/s]     58%|█████▊    | 135610/234119.0 [00:25<00:17, 5487.40it/s]     58%|█████▊    | 136159/234119.0 [00:25<00:18, 5438.99it/s]     58%|█████▊    | 136704/234119.0 [00:26<00:17, 5421.76it/s]     59%|█████▊    | 137248/234119.0 [00:26<00:17, 5424.04it/s]     59%|█████▉    | 137793/234119.0 [00:26<00:17, 5429.51it/s]     59%|█████▉    | 138340/234119.0 [00:26<00:17, 5440.03it/s]     59%|█████▉    | 138904/234119.0 [00:26<00:17, 5499.58it/s]     60%|█████▉    | 139466/234119.0 [00:26<00:17, 5533.84it/s]     60%|█████▉    | 140020/234119.0 [00:26<00:17, 5473.93it/s]     60%|██████    | 140568/234119.0 [00:26<00:17, 5456.67it/s]     60%|██████    | 141114/234119.0 [00:26<00:17, 5426.76it/s]     61%|██████    | 141659/234119.0 [00:27<00:17, 5430.09it/s]     61%|██████    | 142216/234119.0 [00:27<00:16, 5468.72it/s]     61%|██████    | 142763/234119.0 [00:27<00:16, 5388.33it/s]     61%|██████    | 143308/234119.0 [00:27<00:16, 5406.01it/s]     61%|██████▏   | 143858/234119.0 [00:27<00:16, 5433.52it/s]     62%|██████▏   | 144402/234119.0 [00:27<00:16, 5375.89it/s]     62%|██████▏   | 144940/234119.0 [00:27<00:16, 5369.60it/s]     62%|██████▏   | 145483/234119.0 [00:27<00:16, 5386.68it/s]     62%|██████▏   | 146023/234119.0 [00:27<00:16, 5389.97it/s]     63%|██████▎   | 146574/234119.0 [00:27<00:16, 5424.00it/s]     63%|██████▎   | 147134/234119.0 [00:28<00:15, 5476.42it/s]     63%|██████▎   | 147694/234119.0 [00:28<00:15, 5512.74it/s]     63%|██████▎   | 148250/234119.0 [00:28<00:15, 5526.68it/s]     64%|██████▎   | 148803/234119.0 [00:28<00:15, 5464.52it/s]     64%|██████▍   | 149350/234119.0 [00:28<00:15, 5384.65it/s]     64%|██████▍   | 149907/234119.0 [00:28<00:15, 5438.45it/s]     64%|██████▍   | 150452/234119.0 [00:28<00:15, 5431.02it/s]     64%|██████▍   | 151006/234119.0 [00:28<00:15, 5460.16it/s]     65%|██████▍   | 151556/234119.0 [00:28<00:15, 5471.90it/s]     65%|██████▍   | 152105/234119.0 [00:28<00:14, 5474.55it/s]     65%|██████▌   | 152669/234119.0 [00:29<00:14, 5523.64it/s]     65%|██████▌   | 153222/234119.0 [00:29<00:14, 5467.53it/s]     66%|██████▌   | 153769/234119.0 [00:29<00:15, 5333.08it/s]     66%|██████▌   | 154333/234119.0 [00:29<00:14, 5422.13it/s]     66%|██████▌   | 154876/234119.0 [00:29<00:14, 5407.44it/s]     66%|██████▋   | 155431/234119.0 [00:29<00:14, 5447.24it/s]     67%|██████▋   | 155996/234119.0 [00:29<00:14, 5505.70it/s]     67%|██████▋   | 156547/234119.0 [00:29<00:14, 5500.38it/s]     67%|██████▋   | 157099/234119.0 [00:29<00:13, 5506.01it/s]     67%|██████▋   | 157650/234119.0 [00:29<00:14, 5429.92it/s]     68%|██████▊   | 158205/234119.0 [00:30<00:13, 5461.08it/s]     68%|██████▊   | 158753/234119.0 [00:30<00:13, 5465.55it/s]     68%|██████▊   | 159300/234119.0 [00:30<00:13, 5451.26it/s]     68%|██████▊   | 159846/234119.0 [00:30<00:13, 5450.31it/s]     69%|██████▊   | 160392/234119.0 [00:30<00:13, 5426.64it/s]     69%|██████▊   | 160950/234119.0 [00:30<00:13, 5471.93it/s]     69%|██████▉   | 161506/234119.0 [00:30<00:13, 5498.10it/s]     69%|██████▉   | 162056/234119.0 [00:30<00:13, 5432.18it/s]     69%|██████▉   | 162600/234119.0 [00:30<00:13, 5413.37it/s]     70%|██████▉   | 163149/234119.0 [00:30<00:13, 5434.85it/s]     70%|██████▉   | 163694/234119.0 [00:31<00:12, 5438.01it/s]     70%|███████   | 164245/234119.0 [00:31<00:12, 5459.48it/s]     70%|███████   | 164792/234119.0 [00:31<00:12, 5340.85it/s]     71%|███████   | 165361/234119.0 [00:31<00:12, 5442.37it/s]     71%|███████   | 165912/234119.0 [00:31<00:12, 5460.93it/s]     71%|███████   | 166459/234119.0 [00:31<00:12, 5409.00it/s]     71%|███████▏  | 167001/234119.0 [00:31<00:12, 5376.61it/s]     72%|███████▏  | 167564/234119.0 [00:31<00:12, 5449.83it/s]     72%|███████▏  | 168110/234119.0 [00:31<00:12, 5451.40it/s]     72%|███████▏  | 168661/234119.0 [00:31<00:11, 5466.82it/s]     72%|███████▏  | 169214/234119.0 [00:32<00:11, 5485.60it/s]     73%|███████▎  | 169782/234119.0 [00:32<00:11, 5543.32it/s]     73%|███████▎  | 170337/234119.0 [00:32<00:11, 5524.21it/s]     73%|███████▎  | 170890/234119.0 [00:32<00:11, 5501.04it/s]     73%|███████▎  | 171441/234119.0 [00:32<00:11, 5461.91it/s]     73%|███████▎  | 171994/234119.0 [00:32<00:11, 5480.76it/s]     74%|███████▎  | 172546/234119.0 [00:32<00:11, 5489.87it/s]     74%|███████▍  | 173104/234119.0 [00:32<00:11, 5514.53it/s]     74%|███████▍  | 173666/234119.0 [00:32<00:10, 5542.05it/s]     74%|███████▍  | 174234/234119.0 [00:32<00:10, 5580.40it/s]     75%|███████▍  | 174793/234119.0 [00:33<00:10, 5508.14it/s]     75%|███████▍  | 175345/234119.0 [00:33<00:10, 5461.69it/s]     75%|███████▌  | 175892/234119.0 [00:33<00:10, 5379.68it/s]     75%|███████▌  | 176444/234119.0 [00:33<00:10, 5418.22it/s]     76%|███████▌  | 176987/234119.0 [00:33<00:10, 5406.10it/s]     76%|███████▌  | 177544/234119.0 [00:33<00:10, 5454.53it/s]     76%|███████▌  | 178101/234119.0 [00:33<00:10, 5488.48it/s]     76%|███████▋  | 178651/234119.0 [00:33<00:10, 5476.51it/s]     77%|███████▋  | 179199/234119.0 [00:33<00:10, 5446.92it/s]     77%|███████▋  | 179748/234119.0 [00:33<00:09, 5457.77it/s]     77%|███████▋  | 180294/234119.0 [00:34<00:09, 5430.13it/s]     77%|███████▋  | 180851/234119.0 [00:34<00:09, 5470.01it/s]     77%|███████▋  | 181399/234119.0 [00:34<00:09, 5468.04it/s]     78%|███████▊  | 181963/234119.0 [00:34<00:09, 5518.94it/s]     78%|███████▊  | 182515/234119.0 [00:34<00:09, 5505.22it/s]     78%|███████▊  | 183066/234119.0 [00:34<00:09, 5469.56it/s]     78%|███████▊  | 183614/234119.0 [00:34<00:09, 5456.62it/s]     79%|███████▊  | 184160/234119.0 [00:34<00:09, 5404.20it/s]     79%|███████▉  | 184701/234119.0 [00:34<00:09, 5366.70it/s]     79%|███████▉  | 185255/234119.0 [00:34<00:09, 5414.62it/s]     79%|███████▉  | 185797/234119.0 [00:35<00:08, 5380.93it/s]     80%|███████▉  | 186336/234119.0 [00:35<00:08, 5375.60it/s]     80%|███████▉  | 186874/234119.0 [00:35<00:08, 5279.98it/s]     80%|████████  | 187411/234119.0 [00:35<00:08, 5304.88it/s]     80%|████████  | 187949/234119.0 [00:35<00:08, 5326.13it/s]     81%|████████  | 188484/234119.0 [00:35<00:08, 5331.72it/s]     81%|████████  | 189022/234119.0 [00:35<00:08, 5343.79it/s]     81%|████████  | 189579/234119.0 [00:35<00:08, 5408.10it/s]     81%|████████  | 190120/234119.0 [00:35<00:08, 5383.45it/s]     81%|████████▏ | 190659/234119.0 [00:36<00:08, 5375.37it/s]     82%|████████▏ | 191197/234119.0 [00:36<00:08, 5362.06it/s]     82%|████████▏ | 191734/234119.0 [00:36<00:07, 5354.78it/s]     82%|████████▏ | 192274/234119.0 [00:36<00:07, 5367.83it/s]     82%|████████▏ | 192823/234119.0 [00:36<00:07, 5401.25it/s]     83%|████████▎ | 193364/234119.0 [00:36<00:07, 5402.88it/s]     83%|████████▎ | 193909/234119.0 [00:36<00:07, 5416.76it/s]     83%|████████▎ | 194453/234119.0 [00:36<00:07, 5419.41it/s]     83%|████████▎ | 194995/234119.0 [00:36<00:07, 5405.99it/s]     84%|████████▎ | 195536/234119.0 [00:36<00:07, 5386.30it/s]     84%|████████▍ | 196075/234119.0 [00:37<00:07, 5386.70it/s]     84%|████████▍ | 196614/234119.0 [00:37<00:06, 5369.00it/s]     84%|████████▍ | 197151/234119.0 [00:37<00:06, 5327.96it/s]     84%|████████▍ | 197684/234119.0 [00:37<00:07, 5199.35it/s]     85%|████████▍ | 198205/234119.0 [00:37<00:06, 5190.60it/s]     85%|████████▍ | 198725/234119.0 [00:37<00:06, 5172.89it/s]     85%|████████▌ | 199251/234119.0 [00:37<00:06, 5195.60it/s]     85%|████████▌ | 199799/234119.0 [00:37<00:06, 5278.76it/s]     86%|████████▌ | 200338/234119.0 [00:37<00:06, 5311.61it/s]     86%|████████▌ | 200877/234119.0 [00:37<00:06, 5333.69it/s]     86%|████████▌ | 201422/234119.0 [00:38<00:06, 5368.16it/s]     86%|████████▋ | 201959/234119.0 [00:38<00:06, 5352.18it/s]     86%|████████▋ | 202495/234119.0 [00:38<00:05, 5330.84it/s]     87%|████████▋ | 203037/234119.0 [00:38<00:05, 5355.05it/s]     87%|████████▋ | 203573/234119.0 [00:38<00:05, 5348.69it/s]     87%|████████▋ | 204112/234119.0 [00:38<00:05, 5359.17it/s]     87%|████████▋ | 204656/234119.0 [00:38<00:05, 5382.41it/s]     88%|████████▊ | 205201/234119.0 [00:38<00:05, 5400.79it/s]     88%|████████▊ | 205742/234119.0 [00:38<00:05, 5376.89it/s]     88%|████████▊ | 206284/234119.0 [00:38<00:05, 5385.61it/s]     88%|████████▊ | 206829/234119.0 [00:39<00:05, 5404.80it/s]     89%|████████▊ | 207381/234119.0 [00:39<00:04, 5438.71it/s]     89%|████████▉ | 207925/234119.0 [00:39<00:04, 5433.65it/s]     89%|████████▉ | 208469/234119.0 [00:39<00:04, 5400.90it/s]     89%|████████▉ | 209010/234119.0 [00:39<00:04, 5260.73it/s]     90%|████████▉ | 209541/234119.0 [00:39<00:04, 5273.77it/s]     90%|████████▉ | 210091/234119.0 [00:39<00:04, 5339.74it/s]     90%|████████▉ | 210626/234119.0 [00:39<00:07, 3328.82it/s]     90%|█████████ | 211163/234119.0 [00:40<00:06, 3754.84it/s]     90%|█████████ | 211698/234119.0 [00:40<00:05, 4121.28it/s]     91%|█████████ | 212225/234119.0 [00:40<00:04, 4403.88it/s]     91%|█████████ | 212768/234119.0 [00:40<00:04, 4670.42it/s]     91%|█████████ | 213287/234119.0 [00:40<00:04, 4808.73it/s]     91%|█████████▏| 213838/234119.0 [00:40<00:04, 5003.58it/s]     92%|█████████▏| 214385/234119.0 [00:40<00:03, 5133.12it/s]     92%|█████████▏| 214916/234119.0 [00:40<00:03, 5169.39it/s]     92%|█████████▏| 215449/234119.0 [00:40<00:03, 5213.04it/s]     92%|█████████▏| 216002/234119.0 [00:40<00:03, 5303.17it/s]     92%|█████████▏| 216539/234119.0 [00:41<00:03, 5312.15it/s]     93%|█████████▎| 217092/234119.0 [00:41<00:03, 5373.71it/s]     93%|█████████▎| 217633/234119.0 [00:41<00:03, 5321.59it/s]     93%|█████████▎| 218173/234119.0 [00:41<00:02, 5344.75it/s]     93%|█████████▎| 218720/234119.0 [00:41<00:02, 5378.92it/s]     94%|█████████▎| 219260/234119.0 [00:41<00:02, 5340.77it/s]     94%|█████████▍| 219810/234119.0 [00:41<00:02, 5386.99it/s]     94%|█████████▍| 220354/234119.0 [00:41<00:02, 5402.31it/s]     94%|█████████▍| 220895/234119.0 [00:41<00:02, 5357.03it/s]     95%|█████████▍| 221441/234119.0 [00:41<00:02, 5385.87it/s]     95%|█████████▍| 221980/234119.0 [00:42<00:02, 5357.57it/s]     95%|█████████▌| 222518/234119.0 [00:42<00:02, 5363.16it/s]     95%|█████████▌| 223055/234119.0 [00:42<00:02, 5323.26it/s]     96%|█████████▌| 223601/234119.0 [00:42<00:01, 5363.12it/s]     96%|█████████▌| 224138/234119.0 [00:42<00:01, 5247.03it/s]     96%|█████████▌| 224683/234119.0 [00:42<00:01, 5304.32it/s]     96%|█████████▌| 225214/234119.0 [00:42<00:01, 5264.46it/s]     96%|█████████▋| 225749/234119.0 [00:42<00:01, 5288.78it/s]     97%|█████████▋| 226279/234119.0 [00:42<00:01, 5261.97it/s]     97%|█████████▋| 226806/234119.0 [00:42<00:01, 5254.48it/s]     97%|█████████▋| 227345/234119.0 [00:43<00:01, 5292.76it/s]     97%|█████████▋| 227875/234119.0 [00:43<00:01, 5255.02it/s]     98%|█████████▊| 228401/234119.0 [00:43<00:01, 5189.44it/s]     98%|█████████▊| 228921/234119.0 [00:43<00:01, 5063.97it/s]     98%|█████████▊| 229429/234119.0 [00:43<00:00, 5031.91it/s]     98%|█████████▊| 229957/234119.0 [00:43<00:00, 5102.92it/s]     98%|█████████▊| 230480/234119.0 [00:43<00:00, 5137.27it/s]     99%|█████████▊| 231000/234119.0 [00:43<00:00, 5153.43it/s]     99%|█████████▉| 231520/234119.0 [00:43<00:00, 5166.92it/s]     99%|█████████▉| 232048/234119.0 [00:43<00:00, 5199.54it/s]     99%|█████████▉| 232569/234119.0 [00:44<00:00, 5187.23it/s]    100%|█████████▉| 233121/234119.0 [00:44<00:00, 5285.66it/s]    100%|█████████▉| 233655/234119.0 [00:44<00:00, 5301.02it/s]    100%|██████████| 234119/234119.0 [00:44<00:00, 5266.11it/s]
    Downloading https://templateflow.s3.amazonaws.com/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_T1w.nii.gz
      0%|          | 0.00/13.7M [00:00<?, ?B/s]      0%|          | 52.2k/13.7M [00:00<00:26, 510kB/s]      2%|▏         | 261k/13.7M [00:00<00:09, 1.40MB/s]      8%|▊         | 1.10M/13.7M [00:00<00:02, 4.43MB/s]     32%|███▏      | 4.36M/13.7M [00:00<00:00, 15.1MB/s]     63%|██████▎   | 8.57M/13.7M [00:00<00:00, 24.3MB/s]     94%|█████████▍| 12.8M/13.7M [00:00<00:00, 30.0MB/s]    100%|██████████| 13.7M/13.7M [00:00<00:00, 21.7MB/s]
    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
    Optimizing level 2 [max iter: 10000]
    Optimizing level 1 [max iter: 1000]
    Optimizing level 0 [max iter: 100]
      0%|          | 0/2 [00:00<?, ?it/s]     50%|█████     | 1/2 [00:00<00:00,  4.28it/s]    100%|██████████| 2/2 [00:00<00:00,  3.84it/s]    100%|██████████| 2/2 [00:00<00:00,  3.90it/s]
      0%|          | 0/2 [00:00<?, ?it/s]     50%|█████     | 1/2 [00:00<00:00,  3.40it/s]    100%|██████████| 2/2 [00:00<00:00,  3.45it/s]    100%|██████████| 2/2 [00:00<00:00,  3.45it/s]




.. GENERATED FROM PYTHON SOURCE LINES 103-109

Interactive bundle visualization
--------------------------------
Another way to examine the outputs is to export the individual bundle
figures, which show the streamlines, as well as the ROIs used to define the
bundle. This is an html file, which contains an interactive figure that can
be navigated, zoomed, rotated, etc.

.. GENERATED FROM PYTHON SOURCE LINES 109-113

.. code-block:: Python


    bundle_html = my_afq.export("indiv_bundles_figures")
    plotly.io.show(bundle_html["NDARAA948VFH"]["AR_L"])




.. raw:: html
    :file: images/sphx_glr_plot_accoustic_radiations_001.html





.. GENERATED FROM PYTHON SOURCE LINES 114-127

References
----------
.. [1] Alexander LM, Escalera J, Ai L, et al. An open resource for
    transdiagnostic research in pediatric mental health and learning
    disorders. Sci Data. 2017;4:170181.

.. [2] Richie-Halford A, Cieslak M, Ai L, et al. An analysis-ready and quality
    controlled resource for pediatric brain white-matter research. Scientific
    Data. 2022;9(1):1-27.

.. [3] Cieslak M, Cook PA, He X, et al. QSIPrep: an integrative platform for
    preprocessing and reconstructing diffusion MRI data. Nat Methods.
    2021;18(7):775-778.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (29 minutes 7.364 seconds)

**Estimated memory usage:**  5770 MB


.. _sphx_glr_download_howto_howto_examples_plot_accoustic_radiations.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_accoustic_radiations.ipynb <plot_accoustic_radiations.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_accoustic_radiations.py <plot_accoustic_radiations.py>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
